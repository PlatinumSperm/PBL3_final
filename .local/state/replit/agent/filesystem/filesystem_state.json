{"file_contents":{"src/App.css":{"content":"/* Reset & font chung */\nbody {\n  margin: 0;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n  background-color: #fff5f5; /* n·ªÅn h·ªìng nh·∫°t */\n  color: #333;\n}\n\nbutton {\n  cursor: pointer;\n  border: none;\n  transition: all 0.3s ease;\n}\n\na {\n  text-decoration: none;\n  color: inherit;\n}\n\n/* Loading Spinner */\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background-color: #fff5f5;\n}\n\n.loading-spinner {\n  width: 50px;\n  height: 50px;\n  border: 5px solid #f3f3f3;\n  border-top: 5px solid #e63946;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n","size_bytes":734},"src/firebaseConfig.js":{"content":"const config = {\n  apiKey: \"AIzaSyAqnKnaOXq8BDGZEtysnsvdC2mQp59HK4g\",\n  authDomain: \"nigga-453cc.firebaseapp.com\",\n  projectId: \"nigga-453cc\",\n  storageBucket: \"nigga-453cc.firebasestorage.app\",\n  messagingSenderId: \"915040669995\",\n  appId: \"1:915040669995:web:df3443c5721da99f7db56e\"\n};\nexport default config;","size_bytes":310},"src/component/DeviceSettings.css":{"content":".settings-container {\n  padding: 40px;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.settings-header {\n  margin-bottom: 32px;\n}\n\n.settings-header h1 {\n  font-size: 32px;\n  font-weight: bold;\n  color: #ffffff;\n  margin-bottom: 8px;\n}\n\n.settings-layout {\n  display: flex;\n  gap: 32px;\n  min-height: calc(100vh - 200px);\n}\n\n/* Tabs Navigation */\n.settings-tabs {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 32px;\n  background: #1a1a1a;\n  padding: 8px;\n  border-radius: 12px;\n  border: 1px solid #2a2a2a;\n}\n\n.tab-item {\n  flex: 1;\n  padding: 14px 24px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  font-weight: 600;\n  text-align: center;\n  color: #999;\n  background: transparent;\n}\n\n.tab-item:hover {\n  background: #2a2a2a;\n  color: #e0e0e0;\n}\n\n.tab-item.active {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF8585 100%);\n  color: white;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);\n}\n\n/* Settings Content */\n.settings-content {\n  flex: 1;\n  background: #1a1a1a;\n  border-radius: 16px;\n  padding: 32px;\n  border: 1px solid #2a2a2a;\n}\n\n.settings-section h2 {\n  font-size: 24px;\n  color: #ffffff;\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #2a2a2a;\n}\n\n.settings-section p {\n  color: #999;\n  margin-bottom: 24px;\n  line-height: 1.6;\n}\n\n.form-group {\n  margin-bottom: 24px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 10px;\n  color: #e0e0e0;\n  font-weight: 600;\n  font-size: 14px;\n}\n\n.form-group input,\n.form-group select {\n  width: 100%;\n  padding: 12px 16px;\n  border: 1px solid #3a3a3a;\n  border-radius: 10px;\n  font-size: 15px;\n  background: #2a2a2a;\n  color: #ffffff;\n  transition: all 0.3s ease;\n}\n\n.form-group input:focus,\n.form-group select:focus {\n  border-color: #FF6B6B;\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);\n  background: #333;\n}\n\n.form-group input:disabled {\n  background: #1a1a1a;\n  cursor: not-allowed;\n  opacity: 0.6;\n}\n\n.form-group select {\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23999' d='M6 9L1 4h10z'/%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 16px center;\n  padding-right: 40px;\n}\n\n.avatar-upload {\n  margin-top: 12px;\n}\n\n.avatar-upload input[type=\"file\"] {\n  width: 100%;\n  padding: 12px;\n  border: 2px dashed #3a3a3a;\n  border-radius: 10px;\n  cursor: pointer;\n  background: #2a2a2a;\n  color: #999;\n  transition: all 0.3s ease;\n}\n\n.avatar-upload input[type=\"file\"]:hover {\n  border-color: #FF6B6B;\n  background: #333;\n}\n\n.avatar-preview {\n  margin-top: 12px;\n  padding: 12px;\n  background: #2a2a2a;\n  border-radius: 8px;\n  font-size: 14px;\n  color: #999;\n  border: 1px solid #3a3a3a;\n}\n\nbutton[type=\"submit\"],\n.save-button {\n  width: 100%;\n  padding: 14px;\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF8585 100%);\n  color: white;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);\n}\n\nbutton[type=\"submit\"]:hover,\n.save-button:hover {\n  background: linear-gradient(135deg, #FF5252 0%, #FF6B6B 100%);\n  box-shadow: 0 6px 16px rgba(255, 107, 107, 0.4);\n  transform: translateY(-2px);\n}\n\n.message {\n  position: fixed;\n  top: 80px;\n  right: 20px;\n  z-index: 1000;\n  padding: 16px 24px;\n  border-radius: 12px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);\n  animation: slideIn 0.3s ease forwards;\n  font-weight: 600;\n}\n\n@keyframes slideIn {\n  from {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  to {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n\n.message.success {\n  background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);\n  color: white;\n}\n\n.message.error {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);\n  color: white;\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #0a0a0a;\n}\n\n.loading-spinner {\n  width: 60px;\n  height: 60px;\n  border: 4px solid #2a2a2a;\n  border-top: 4px solid #FF6B6B;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n@media (max-width: 768px) {\n  .settings-layout {\n    flex-direction: column;\n  }\n  \n  .settings-tabs {\n    flex-direction: column;\n  }\n  \n  .settings-content {\n    padding: 24px;\n  }\n}\n","size_bytes":4467},"src/component/SignIn.js":{"content":"import { useState } from \"react\";\nimport \"./SignIn.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { signIn, signInWithGoogle } from \"../authService\";\nimport { toast } from \"react-toastify\";\n\nexport default function SignIn() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSignIn = async (e) => {\n    e.preventDefault(); // NgƒÉn ch·∫∑n form submit m·∫∑c ƒë·ªãnh\n\n    // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o\n    if (!email || !password) {\n      toast.error(\"Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß email v√† m·∫≠t kh·∫©u!\");\n      return;\n    }\n\n    // Ki·ªÉm tra ƒë·ªãnh d·∫°ng email\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      toast.error(\"Email kh√¥ng h·ª£p l·ªá!\");\n      return;\n    }\n\n    try {\n      const { success, isAdmin } = await signIn(email, password);\n      if (success) {\n        if (isAdmin) {\n          navigate(\"/admin\");\n        } else {\n          navigate(\"/\");\n        }\n      }\n    } catch (error) {\n      toast.error(\"C√≥ l·ªói x·∫£y ra khi ƒëƒÉng nh·∫≠p!\");\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    try {\n      const success = await signInWithGoogle();\n      if (success) {\n        navigate(\"/\");\n      }\n    } catch (error) {\n      toast.error(\"C√≥ l·ªói x·∫£y ra khi ƒëƒÉng nh·∫≠p v·ªõi Google!\");\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>ƒêƒÉng Nh·∫≠p</h2>\n      <form onSubmit={handleSignIn}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value.trim())}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"M·∫≠t kh·∫©u\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <button type=\"submit\" className=\"auth-btn-primary\">\n          ƒêƒÉng Nh·∫≠p\n        </button>\n      </form>\n      <button className=\"auth-btn-secondary\" onClick={handleGoogleSignIn}>\n        ƒêƒÉng nh·∫≠p v·ªõi Google\n      </button>\n      <div className=\"auth-links\">\n        <Link to=\"/signup\" className=\"auth-link\">\n          Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω\n        </Link>\n        <Link to=\"/reset\" className=\"auth-link\">\n          Qu√™n m·∫≠t kh·∫©u?\n        </Link>\n      </div>\n    </div>\n  );\n}\n","size_bytes":2406},"src/context/MQTTContext.js":{"content":"import React, { createContext, useContext, useState, useEffect } from 'react';\nimport mqtt from 'mqtt';\n\nconst MQTTContext = createContext();\n\nexport const useMQTT = () => {\n  return useContext(MQTTContext);\n};\n\nexport function MQTTProvider({ children }) {\n  const [healthData, setHealthData] = useState([]);\n  const [currentData, setCurrentData] = useState({\n    bpm: null,\n    spo2: null,\n    temp: null,\n    ir: null\n  });\n\n  useEffect(() => {\n    const client = mqtt.connect(\"wss://broker.emqx.io:8084/mqtt\");\n\n    client.on(\"connect\", () => {\n      console.log(\"Connected to MQTT\");\n      client.subscribe(\"thongtinbenhnhan\");\n    });\n\n    client.on(\"message\", (topic, message) => {\n      try {\n        const data = JSON.parse(message.toString());\n        const timestamp = new Date().toLocaleString('vi-VN');\n        \n        const newData = {\n          timestamp,\n          bpm: data.BPM !== -999 ? data.BPM : currentData.bpm,\n          spo2: data.SpO2 !== -999 ? data.SpO2 : currentData.spo2,\n          temp: data.TempC !== -999 ? data.TempC : currentData.temp,\n          ir: data.IR !== -999 ? data.IR : currentData.ir\n        };\n\n        // Ki·ªÉm tra tr·∫°ng th√°i b√°o ƒë·ªông\n        const isAlert = \n          newData.bpm < 60 || newData.bpm > 100 ||\n          newData.spo2 < 90 ||\n          newData.temp < 25 || newData.temp > 30;\n\n        const dataWithStatus = {\n          ...newData,\n          status: isAlert ? 'alert' : 'normal',\n          alerts: {\n            bpm: newData.bpm < 60 || newData.bpm > 100,\n            spo2: newData.spo2 < 90,\n            temp: newData.temp < 25 || newData.temp > 30\n          }\n        };\n\n        // C·∫≠p nh·∫≠t d·ªØ li·ªáu hi·ªán t·∫°i\n        setCurrentData(newData);\n\n        // Th√™m v√†o l·ªãch s·ª≠\n        setHealthData(prev => [...prev, dataWithStatus]);\n\n      } catch (err) {\n        console.error(\"Error parsing MQTT:\", err);\n      }\n    });\n\n    return () => {\n      client.unsubscribe(\"thongtinbenhnhan\");\n      client.end();\n    };\n  }, []);\n\n  const value = {\n    currentData,\n    healthData,\n    clearHistory: () => setHealthData([])\n  };\n\n  return (\n    <MQTTContext.Provider value={value}>\n      {children}\n    </MQTTContext.Provider>\n  );\n}","size_bytes":2215},"src/authService.js":{"content":"import {\n  signInWithPopup,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  sendPasswordResetEmail,\n  signOut,\n} from \"firebase/auth\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { auth, db, googleProvider } from \"./firebase\";\nimport { toast } from \"react-toastify\";\n\n// ƒêƒÉng nh·∫≠p Google\nexport const signInWithGoogle = async () => {\n  try {\n    await signInWithPopup(auth, googleProvider);\n    toast.success(\"ƒêƒÉng nh·∫≠p Google th√†nh c√¥ng üéâ\");\n  } catch (error) {\n    toast.error(\"ƒêƒÉng nh·∫≠p Google th·∫•t b·∫°i ‚ùå\");\n  }\n};\n\n// ƒêƒÉng k√Ω\nexport const signUp = async (email, password) => {\n  try {\n    const result = await createUserWithEmailAndPassword(auth, email, password);\n    const user = result.user;\n    await setDoc(doc(db, \"users\", user.uid), {\n      email: user.email,\n      createdAt: new Date(),\n    });\n    toast.success(\"T·∫°o t√†i kho·∫£n th√†nh c√¥ng üéâ\");\n    return true;\n  } catch (error) {\n    if (error.code === \"auth/email-already-in-use\") {\n      toast.error(\"‚ùå T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i\");\n    } else if (error.code === \"auth/weak-password\") {\n      toast.error(\"‚ùå M·∫≠t kh·∫©u qu√° y·∫øu\");\n    } else {\n      toast.error(\"‚ùå L·ªói t·∫°o t√†i kho·∫£n\");\n    }\n    return false;\n  }\n};\n\n// ƒêƒÉng nh·∫≠p Email\nexport const signIn = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    \n    // C·∫≠p nh·∫≠t th·ªùi gian ƒëƒÉng nh·∫≠p cu·ªëi trong Firestore\n    await setDoc(doc(db, \"users\", user.uid), {\n      lastLogin: new Date()\n    }, { merge: true });\n    \n    toast.success(\"ƒêƒÉng nh·∫≠p th√†nh c√¥ng üéâ\");\n    \n    // Ki·ªÉm tra n·∫øu l√† admin th√¨ chuy·ªÉn ƒë·∫øn trang admin\n    if (user.email === \"admin@admin.com\") {\n      return { success: true, isAdmin: true };\n    }\n    \n    return { success: true, isAdmin: false };\n  } catch (error) {\n    if (error.code === \"auth/user-not-found\") {\n      toast.error(\"‚ùå T√†i kho·∫£n kh√¥ng t·ªìn t·∫°i\");\n    } else if (error.code === \"auth/wrong-password\") {\n      toast.error(\"‚ùå Sai m·∫≠t kh·∫©u\");\n    } else if (error.code === \"auth/invalid-email\") {\n      toast.error(\"‚ùå Email kh√¥ng h·ª£p l·ªá\");\n    } else {\n      toast.error(\"‚ùå L·ªói ƒëƒÉng nh·∫≠p: \" + error.message);\n    }\n    return { success: false, isAdmin: false };\n  }\n};\n\n// Reset password\nexport const resetPassword = async (email) => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    toast.info(\"üì© Email reset m·∫≠t kh·∫©u ƒë√£ ƒë∆∞·ª£c g·ª≠i\");\n  } catch (error) {\n    toast.error(\"‚ùå Kh√¥ng th·ªÉ g·ª≠i email reset\");\n  }\n};\n\n// ƒêƒÉng xu·∫•t\nexport const logout = async () => {\n  await signOut(auth);\n  toast.info(\"B·∫°n ƒë√£ ƒëƒÉng xu·∫•t üëã\");\n};\n","size_bytes":2793},"src/utils/heartrules.js":{"content":"// heartrules.js\n// Quy t·∫Øc ph√¢n t√≠ch tim m·∫°ch theo tr·∫°ng th√°i v√† g·ª£i √Ω ho·∫°t ƒë·ªông\n\nexport const activityThresholds = {\n  \"Ngh·ªâ ng∆°i\": { min: 60, max: 100, spo2Min: 95 },\n  \"Ho·∫°t ƒë·ªông nh·∫π\": { min: 70, max: 120, spo2Min: 94 },\n  \"V·∫≠n ƒë·ªông m·∫°nh\": { min: 90, max: 160, spo2Min: 92 },\n  \"Ng·ªß\": { min: 50, max: 85, spo2Min: 95 }\n};\n\nexport function getSuggestedActivity(bpm) {\n  // G·ª£i √Ω ho·∫°t ƒë·ªông d·ª±a tr√™n nh·ªãp tim\n  if (bpm >= 60 && bpm < 85) return \"Ng·ªß\";\n  if (bpm >= 60 && bpm < 94) return \"Ngh·ªâ ng∆°i\";\n  if (bpm >= 95 && bpm < 120) return \"Ho·∫°t ƒë·ªông nh·∫π\";\n  if (bpm >= 121 && bpm < 160) return \"V·∫≠n ƒë·ªông m·∫°nh\";\n  return \"Ngh·ªâ ng∆°i\"; // M·∫∑c ƒë·ªãnh v·ªÅ tr·∫°ng th√°i ngh·ªâ ng∆°i\n}\n\nexport function analyzeHeartData(bpm, spo2, temp, currentActivity) {\n  const thresholds = activityThresholds[currentActivity] || activityThresholds[\"Ngh·ªâ ng∆°i\"];\n  const warnings = [];\n\n  if (bpm < thresholds.min || bpm > thresholds.max) {\n    warnings.push(\"Nh·ªãp tim b·∫•t th∆∞·ªùng\");\n  }\n  if (spo2 < thresholds.spo2Min) {\n    warnings.push(\"SpO2 th·∫•p\");\n  }\n\n  const status = warnings.length > 0 ? \"C·∫£nh b√°o\" : \"B√¨nh th∆∞·ªùng\";\n  const suggestedActivity = getSuggestedActivity(bpm);\n\n  return {\n    status,\n    warnings,\n    currentActivity,\n    suggestedActivity,\n    isActivityChange: suggestedActivity !== currentActivity\n  };\n}\n\n// ƒêi·ªÅu ch·ªânh ng∆∞·ª°ng ƒë·ªông khi ng∆∞·ªùi d√πng x√°c nh·∫≠n thay ƒë·ªïi\nexport function adjustThresholds(thresholds, newActivity) {\n  const updated = { ...thresholds };\n  updated.current = newActivity;\n  return updated;\n}\n","size_bytes":1636},"src/component/AdminDashboard.css":{"content":".admin-dashboard {\n    padding: 20px;\n    max-width: 1200px;\n    margin: 0 auto;\n    font-family: Arial, sans-serif;\n}\n\n.dashboard-container {\n    display: flex;\n    gap: 30px;\n    margin-top: 20px;\n}\n\n.users-list {\n    flex: 1;\n    max-width: 280px;\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);\n}\n\n.data-display {\n    flex: 3;\n    background: white;\n    padding: 20px;\n    border-radius: 12px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);\n    overflow-x: auto;\n}\n\n.user-button {\n    display: block;\n    width: 100%;\n    padding: 12px 15px;\n    margin: 8px 0;\n    border: none;\n    border-radius: 6px;\n    background: #f4f4f4;\n    cursor: pointer;\n    font-size: 15px;\n    transition: all 0.3s ease;\n}\n\n.user-button:hover {\n    background: #e63946;\n    color: white;\n}\n\n.user-button.selected {\n    background: #e63946;\n    color: white;\n    font-weight: bold;\n}\n\n.data-table {\n    margin-top: 20px;\n    border-radius: 8px;\n    overflow: hidden;\n}\n\ntable {\n    width: 100%;\n    border-collapse: collapse;\n    font-size: 15px;\n}\n\nth, td {\n    padding: 12px 15px;\n    text-align: left;\n    border-bottom: 1px solid #eee;\n}\n\nth {\n    background-color: #f8f9fa;\n    color: #333;\n    font-weight: 600;\n    position: sticky;\n    top: 0;\n    z-index: 2;\n}\n\ntbody tr:hover {\n    background-color: #f9f9f9;\n}\n\n/* Highlight status */\n.status-normal {\n    background-color: #e7f5e7;\n}\n\n.status-warning {\n    background-color: #fff3e0;\n}\n\n.status-alert {\n    background-color: #ffebee;\n}\n\n/* Animation cho d·ªØ li·ªáu m·ªõi */\n@keyframes newData {\n    from { background-color: #dbeafe; }\n    to { background-color: transparent; }\n}\n\ntbody tr:first-child {\n    animation: newData 2s ease-out;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n    .dashboard-container {\n        flex-direction: column;\n    }\n\n    .users-list {\n        max-width: 100%;\n    }\n\n    table {\n        font-size: 14px;\n    }\n\n    th, td {\n        padding: 8px 10px;\n    }\n}\n\nh1 {\n    color: #333;\n    margin-bottom: 30px;\n}\n\nh2 {\n    color: #444;\n    margin-bottom: 20px;\n}\n","size_bytes":2108},"src/component/Hero.css":{"content":".hero {\n  text-align: center;\n  padding: 80px 20px;\n  background-color: #fff5f5;\n}\n\n.hero h1 {\n  font-size: 40px;\n  font-weight: bold;\n  color: #1d3557;\n  margin-bottom: 16px;\n}\n\n.hero p {\n  font-size: 16px;\n  max-width: 700px;\n  margin: 0 auto 24px;\n  color: #080606;\n  line-height: 1.6;\n  background: rgba(255,255,255,0.7); /* n·ªÅn tr·∫Øng m·ªù */\n  padding: 10px;\n  border-radius: 12px;\n  display: inline-block;\n}\n\n.hero-btn-secondary {\n  background-color: #f1f1f1;\n  color: #333;\n  padding: 12px 28px;\n  border-radius: 8px;\n  font-weight: 500;\n}\n\n.hero-btn-secondary:hover {\n  background-color: #e5e5e5;\n}\n\n.hero img {\n  max-width: 90%;\n  height: auto;\n  border-radius: 12px;\n  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);\n}\n\n.status-card {\n  padding: 16px;\n  border-radius: 12px;\n  font-size: 18px;\n  font-weight: bold;\n  text-align: center;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  transition: background 0.3s ease;\n  margin-bottom: 10px;\n  width: 80%;\n  max-width: 500px;\n  margin: 0 auto 10px auto;\n}\n\n.status-card.none {\n  background: #f5f5f5;\n  color: #666;\n}\n\n.status-card.normal {\n  background: #d4edda;\n  color: #155724;\n}\n\n.status-card.alert {\n  background: #f8d7da;\n  color: #721c24;\n}\n\n.hero {\n  background-image: url('/public/nen3.jpg');\n  background-size: cover;      /* ph·ªß h·∫øt v√πng hero */\n  background-position: center;\n  background-repeat: no-repeat;\n  min-height: 350px;           /* ƒëi·ªÅu ch·ªânh chi·ªÅu cao */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 12px;         /* n·∫øu mu·ªën bo g√≥c */\n  padding: 20px;\n}\n","size_bytes":1589},"src/component/SignUp.css":{"content":".auth-page {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);\n  padding: 20px;\n}\n\n.auth-container {\n  max-width: 450px;\n  width: 100%;\n  background: #ffffff;\n  padding: 40px;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n  text-align: center;\n  animation: fadeInUp 0.5s ease-in-out;\n  position: relative;\n}\n\n.auth-container::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, #6366F1, #8B5CF6, #EC4899);\n  border-radius: 20px 20px 0 0;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.auth-container .heart-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n  filter: drop-shadow(0 4px 12px rgba(99, 102, 241, 0.3));\n}\n\n.auth-container h2 {\n  margin-bottom: 32px;\n  font-size: 32px;\n  font-weight: bold;\n  background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.auth-container form {\n  width: 100%;\n}\n\n.auth-container input {\n  width: 100%;\n  padding: 14px 16px;\n  margin: 12px 0;\n  border: 2px solid #e0e0e0;\n  border-radius: 12px;\n  font-size: 15px;\n  transition: all 0.3s ease;\n  background: #f8f9fa;\n  color: #333;\n}\n\n.auth-container input:focus {\n  outline: none;\n  border-color: #6366F1;\n  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);\n  background: white;\n}\n\n.auth-container input::placeholder {\n  color: #666;\n}\n\n.auth-links {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-top: 20px;\n}\n\n.auth-container button {\n  width: 100%;\n  padding: 14px;\n  margin-top: 16px;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  border: none;\n  cursor: pointer;\n}\n\n.auth-btn-primary {\n  background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);\n}\n\n.auth-btn-primary:hover {\n  background: linear-gradient(135deg, #5558E3 0%, #7C3AED 100%);\n  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);\n  transform: translateY(-2px);\n}\n\n.auth-btn-secondary {\n  background: #f8f9fa;\n  color: #333;\n  border: 2px solid #e0e0e0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n}\n\n.auth-btn-secondary:hover {\n  background: #ffffff;\n  border-color: #6366F1;\n  color: #6366F1;\n  transform: translateY(-2px);\n}\n\n.auth-link {\n  margin-top: 20px;\n  display: block;\n  font-size: 14px;\n  color: #6366F1;\n  cursor: pointer;\n  font-weight: 500;\n}\n\n.auth-link:hover {\n  text-decoration: underline;\n  color: #5558E3;\n}\n\n.divider {\n  display: flex;\n  align-items: center;\n  text-align: center;\n  margin: 24px 0;\n  color: #999;\n  font-size: 14px;\n}\n\n.divider::before,\n.divider::after {\n  content: '';\n  flex: 1;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.divider span {\n  padding: 0 16px;\n}\n","size_bytes":3028},"README.md":{"content":"# Getting Started with Create React App\n\nThis project was bootstrapped with [Create React App](https://github.com/facebook/create-react-app).\n\n## Available Scripts\n\nIn the project directory, you can run:\n\n### `npm start`\n\nRuns the app in the development mode.\\\nOpen [http://localhost:3000](http://localhost:3000) to view it in your browser.\n\nThe page will reload when you make changes.\\\nYou may also see any lint errors in the console.\n\n### `npm test`\n\nLaunches the test runner in the interactive watch mode.\\\nSee the section about [running tests](https://facebook.github.io/create-react-app/docs/running-tests) for more information.\n\n### `npm run build`\n\nBuilds the app for production to the `build` folder.\\\nIt correctly bundles React in production mode and optimizes the build for the best performance.\n\nThe build is minified and the filenames include the hashes.\\\nYour app is ready to be deployed!\n\nSee the section about [deployment](https://facebook.github.io/create-react-app/docs/deployment) for more information.\n\n### `npm run eject`\n\n**Note: this is a one-way operation. Once you `eject`, you can't go back!**\n\nIf you aren't satisfied with the build tool and configuration choices, you can `eject` at any time. This command will remove the single build dependency from your project.\n\nInstead, it will copy all the configuration files and the transitive dependencies (webpack, Babel, ESLint, etc) right into your project so you have full control over them. All of the commands except `eject` will still work, but they will point to the copied scripts so you can tweak them. At this point you're on your own.\n\nYou don't have to ever use `eject`. The curated feature set is suitable for small and middle deployments, and you shouldn't feel obligated to use this feature. However we understand that this tool wouldn't be useful if you couldn't customize it when you are ready for it.\n\n## Learn More\n\nYou can learn more in the [Create React App documentation](https://facebook.github.io/create-react-app/docs/getting-started).\n\nTo learn React, check out the [React documentation](https://reactjs.org/).\n\n### Code Splitting\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/code-splitting](https://facebook.github.io/create-react-app/docs/code-splitting)\n\n### Analyzing the Bundle Size\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size](https://facebook.github.io/create-react-app/docs/analyzing-the-bundle-size)\n\n### Making a Progressive Web App\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app](https://facebook.github.io/create-react-app/docs/making-a-progressive-web-app)\n\n### Advanced Configuration\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/advanced-configuration](https://facebook.github.io/create-react-app/docs/advanced-configuration)\n\n### Deployment\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/deployment](https://facebook.github.io/create-react-app/docs/deployment)\n\n### `npm run build` fails to minify\n\nThis section has moved here: [https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify](https://facebook.github.io/create-react-app/docs/troubleshooting#npm-run-build-fails-to-minify)\n","size_bytes":3359},"src/component/ResetPassword.js":{"content":"import { useState } from \"react\";\nimport \"./ResetPassword.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { resetPassword } from \"../authService\";\n\nexport default function ResetPassword() {\n  const [email, setEmail] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleResetPassword = async () => {\n    const success = await resetPassword(email);\n    if (success) {\n      navigate(\"/signin\");\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Kh√¥i ph·ª•c m·∫≠t kh·∫©u</h2>\n      <input\n        type=\"email\"\n        placeholder=\"Nh·∫≠p email c·ªßa b·∫°n\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n      />\n      <button className=\"auth-btn-primary\" onClick={handleResetPassword}>\n        G·ª≠i li√™n k·∫øt ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u\n      </button>\n      <Link to=\"/signin\" className=\"auth-link\">\n        ‚Üê Quay l·∫°i ƒëƒÉng nh·∫≠p\n      </Link>\n    </div>\n  );\n}\n","size_bytes":947},"src/component/Hero.js":{"content":"import './Hero.css';\n\nexport default function Hero({ status }) {\n    return (\n        <section className=\"hero\">\n  <div className=\"hero-header\">\n      <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi app qu·∫£n l√Ω s·ª©c kh·ªèe c·ªßa b·∫°n</h1>\n      <p>\n          Trang qu·∫£n l√Ω s·ª©c kh·ªèe c·ªßa ch√∫ng t√¥i gi√∫p b·∫°n theo d√µi nh·ªãp tim v√† d·ª± ƒëo√°n t√¨nh tr·∫°ng s·ª©c kh·ªèe\n          m·ªôt c√°ch ch√≠nh x√°c.\n      </p>\n      <div className={`status-card ${status.type}`}>\n          {status.text}\n      </div>\n  </div>\n</section>\n\n    );\n}\n","size_bytes":536},"src/component/Home.css":{"content":"/* Hero Section */\n.hero-section {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF8585 100%);\n  padding: 60px 40px;\n  text-align: center;\n  margin-bottom: 40px;\n}\n\n.hero-section h1 {\n  font-size: 48px;\n  font-weight: bold;\n  color: #1a1a1a;\n  margin-bottom: 16px;\n  text-shadow: 0 2px 6px rgba(255, 255, 255, 0.3);\n}\n\n.hero-section p {\n  font-size: 18px;\n  color: #2a2a2a;\n  max-width: 700px;\n  margin: 0 auto;\n  line-height: 1.6;\n}\n\n.status-indicator {\n  display: inline-block;\n  margin-top: 20px;\n  background: rgba(0, 0, 0, 0.3);\n  padding: 12px 32px;\n  border-radius: 24px;\n  font-size: 16px;\n  font-weight: 600;\n  color: white;\n}\n\n.status-indicator.online::before {\n  content: \"‚óè\";\n  color: #4CAF50;\n  margin-right: 8px;\n  font-size: 20px;\n}\n\n.heartbeat-line {\n  margin-top: 30px;\n  opacity: 0.6;\n}\n\n/* Main Container */\n.home-container {\n  display: flex;\n  justify-content: space-between;\n  gap: 40px;\n  padding: 0 40px 40px 40px;\n  max-width: 1600px;\n  margin: 0 auto;\n}\n\n/* Left Panel - Metrics */\n.left-panel {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.section-title {\n  font-size: 24px;\n  font-weight: 700;\n  color: #ffffff;\n  margin-bottom: 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.section-title::before {\n  content: \"\";\n  width: 4px;\n  height: 24px;\n  background: linear-gradient(to bottom, #FF6B6B, #FF8585);\n  border-radius: 2px;\n}\n\n.section-title.live::after {\n  content: \"Live\";\n  font-size: 12px;\n  background: #4CAF50;\n  color: white;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-weight: 600;\n  margin-left: 8px;\n}\n\n/* Info Cards */\n.info-card {\n  background: #1a1a1a;\n  border-radius: 16px;\n  padding: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border: 1px solid #2a2a2a;\n  transition: all 0.3s ease;\n}\n\n.info-card:hover {\n  border-color: #FF6B6B;\n  box-shadow: 0 8px 24px rgba(255, 107, 107, 0.2);\n  transform: translateY(-2px);\n}\n\n.icon {\n  font-size: 48px;\n  filter: drop-shadow(0 2px 8px rgba(255, 107, 107, 0.3));\n}\n\n.info-content {\n  text-align: right;\n  flex: 1;\n}\n\n.info-title {\n  font-size: 14px;\n  color: #999;\n  margin-bottom: 8px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.info-value {\n  font-size: 36px;\n  font-weight: bold;\n  color: #ffffff;\n  line-height: 1;\n}\n\n.info-card.heart .icon {\n  color: #FF6B6B;\n}\n\n.info-card.spo2 .icon {\n  color: #4FC3F7;\n}\n\n.info-card.temp .icon {\n  color: #FFB74D;\n}\n\n.info-card.heart .info-value {\n  color: #FF6B6B;\n}\n\n.info-card.spo2 .info-value {\n  color: #4FC3F7;\n}\n\n.info-card.temp .info-value {\n  color: #FFB74D;\n}\n\n/* Status Card */\n.status-card {\n  padding: 20px;\n  border-radius: 16px;\n  font-size: 18px;\n  font-weight: 600;\n  text-align: center;\n  transition: all 0.3s ease;\n  border: 1px solid;\n}\n\n.status-card.none {\n  background: #2a2a2a;\n  color: #999;\n  border-color: #3a3a3a;\n}\n\n.status-card.normal {\n  background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);\n  color: white;\n  border-color: #4CAF50;\n  box-shadow: 0 4px 16px rgba(76, 175, 80, 0.3);\n}\n\n.status-card.alert {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);\n  color: white;\n  border-color: #FF6B6B;\n  box-shadow: 0 4px 16px rgba(255, 107, 107, 0.4);\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0%, 100% {\n    box-shadow: 0 4px 16px rgba(255, 107, 107, 0.4);\n  }\n  50% {\n    box-shadow: 0 8px 24px rgba(255, 107, 107, 0.6);\n  }\n}\n\n/* Activity Selector */\n.activity-button {\n  background: #1a1a1a;\n  border: 1px solid #2a2a2a;\n  border-radius: 12px;\n  padding: 16px;\n  cursor: pointer;\n  font-size: 16px;\n  position: relative;\n  text-align: center;\n  color: #ffffff;\n  transition: all 0.3s ease;\n}\n\n.activity-button:hover {\n  border-color: #FF6B6B;\n  background: #222;\n}\n\n.activity-dropdown {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: #1a1a1a;\n  border: 1px solid #2a2a2a;\n  border-radius: 12px;\n  margin-top: 8px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  overflow: hidden;\n}\n\n.activity-option {\n  padding: 14px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  color: #e0e0e0;\n  border-bottom: 1px solid #2a2a2a;\n}\n\n.activity-option:last-child {\n  border-bottom: none;\n}\n\n.activity-option:hover {\n  background: #2a2a2a;\n  color: #FF6B6B;\n}\n\n/* Right Panel - Chart */\n.right-panel {\n  flex: 2;\n  background: #1a1a1a;\n  border-radius: 16px;\n  padding: 32px;\n  border: 1px solid #2a2a2a;\n}\n\n.chart-toggle {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 24px;\n  flex-wrap: wrap;\n}\n\n.chart-toggle button {\n  padding: 10px 20px;\n  border: 1px solid #3a3a3a;\n  border-radius: 10px;\n  background: #2a2a2a;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  color: #e0e0e0;\n}\n\n.chart-toggle button:hover {\n  background: #333;\n  border-color: #FF6B6B;\n  color: #FF6B6B;\n}\n\n.chart-toggle button.active {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF8585 100%);\n  border-color: #FF6B6B;\n  color: white;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);\n}\n\n/* Popups */\n.popup-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n}\n\n.popup-content {\n  background: #1a1a1a;\n  padding: 32px;\n  border-radius: 16px;\n  text-align: center;\n  max-width: 400px;\n  width: 90%;\n  border: 1px solid #2a2a2a;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n}\n\n.popup-content.error {\n  background: #2a1a1a;\n  border-color: #FF6B6B;\n}\n\n.popup-content.alert {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);\n  color: white;\n}\n\n.popup-content .countdown {\n  color: #FF6B6B;\n  font-size: 24px;\n  font-weight: bold;\n  margin: 16px 0;\n}\n\n.popup-buttons {\n  display: flex;\n  justify-content: center;\n  gap: 16px;\n  margin-top: 24px;\n}\n\n.popup-buttons button {\n  padding: 12px 32px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n\n.popup-buttons button:first-child {\n  background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);\n  color: white;\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.popup-buttons button:last-child {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);\n  color: white;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);\n}\n\n.popup-buttons button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);\n}\n\n/* MQTT Connection Section */\n.mqtt-section {\n  background: #1a1a1a;\n  border: 1px solid #2a2a2a;\n  border-radius: 16px;\n  padding: 24px;\n  margin-bottom: 30px;\n}\n\n.mqtt-section h3 {\n  color: #ffffff;\n  margin-bottom: 16px;\n  font-size: 20px;\n}\n\n.mqtt-section button {\n  padding: 12px 24px;\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF8585 100%);\n  color: white;\n  border-radius: 10px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n\n.mqtt-section button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(255, 107, 107, 0.4);\n}\n\n/* Responsive Design */\n@media (max-width: 1024px) {\n  .home-container {\n    flex-direction: column;\n    padding: 0 24px 24px 24px;\n  }\n  \n  .left-panel,\n  .right-panel {\n    flex: 1;\n    width: 100%;\n  }\n  \n  .hero-section h1 {\n    font-size: 36px;\n  }\n  \n  .hero-section p {\n    font-size: 16px;\n  }\n}\n\n@media (max-width: 768px) {\n  .hero-section {\n    padding: 40px 20px;\n  }\n  \n  .hero-section h1 {\n    font-size: 28px;\n  }\n  \n  .hero-section p {\n    font-size: 14px;\n  }\n  \n  .home-container {\n    padding: 0 16px 16px 16px;\n    gap: 20px;\n  }\n  \n  .info-card {\n    padding: 16px;\n  }\n  \n  .info-value {\n    font-size: 28px;\n  }\n  \n  .chart-toggle {\n    flex-wrap: wrap;\n  }\n  \n  .right-panel {\n    padding: 20px;\n  }\n}\n","size_bytes":7797},"src/firebase.js":{"content":"import { initializeApp } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport firebaseConfig from \"./firebaseConfig\";\nimport { getStorage } from \"firebase/storage\";\n\nconst app = initializeApp(firebaseConfig);\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const googleProvider = new GoogleAuthProvider();\nexport const storage = getStorage(app);\n\n//phongtrans808@gmail.com\tafuDpp&$22//","size_bytes":502},"src/component/ResetPassword.css":{"content":".reset-page {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);\n  padding: 20px;\n}\n\n.reset-container {\n  max-width: 450px;\n  width: 100%;\n  background: #ffffff;\n  padding: 40px;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n  text-align: center;\n  animation: fadeInUp 0.5s ease-in-out;\n  position: relative;\n}\n\n.reset-container::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, #6366F1, #8B5CF6, #EC4899);\n  border-radius: 20px 20px 0 0;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.reset-container h2 {\n  margin-bottom: 32px;\n  font-size: 28px;\n  font-weight: bold;\n  background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.reset-container input {\n  width: 100%;\n  padding: 14px 16px;\n  margin: 12px 0;\n  border: 2px solid #e0e0e0;\n  border-radius: 12px;\n  font-size: 15px;\n  transition: all 0.3s ease;\n  background: #f8f9fa;\n  color: #333;\n}\n\n.reset-container input:focus {\n  outline: none;\n  border-color: #6366F1;\n  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);\n  background: white;\n}\n\n.reset-container input::placeholder {\n  color: #666;\n}\n\n.reset-container button {\n  width: 100%;\n  padding: 14px;\n  margin-top: 16px;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  border: none;\n  cursor: pointer;\n}\n\n.reset-btn {\n  background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);\n}\n\n.reset-btn:hover {\n  background: linear-gradient(135deg, #5558E3 0%, #7C3AED 100%);\n  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);\n  transform: translateY(-2px);\n}\n\n.reset-link {\n  margin-top: 20px;\n  display: block;\n  font-size: 14px;\n  color: #6366F1;\n  cursor: pointer;\n  font-weight: 500;\n}\n\n.reset-link:hover {\n  text-decoration: underline;\n  color: #5558E3;\n}\n","size_bytes":2189},"src/App.js":{"content":"import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport SignIn from './component/SignIn';\nimport SignUp from './component/SignUp';\nimport ResetPassword from './component/ResetPassword';\nimport Home from './component/Home';\nimport AdminDashboard from './component/AdminDashboard';\nimport HealthHistory from './component/HealthHistory';\nimport DeviceSettings from './component/DeviceSettings';\nimport { MQTTProvider } from './context/MQTTContext';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nfunction App() {\n    return (\n        <MQTTProvider>\n            <Router>\n                <Routes>\n                    <Route path=\"/\" element={<Home />} />\n                    <Route path=\"/signin\" element={<SignIn />} />\n                    <Route path=\"/signup\" element={<SignUp />} />\n                    <Route path=\"/reset\" element={<ResetPassword />} />\n                    <Route path=\"/admin\" element={<AdminDashboard />} />\n                    <Route path=\"/health-history\" element={<HealthHistory />} />\n                    <Route path=\"/device-settings\" element={<DeviceSettings />} />\n                </Routes>\n                <ToastContainer position=\"top-right\" autoClose={3000} />\n            </Router>\n        </MQTTProvider>\n    );\n}\n\nexport default App;\n","size_bytes":1343},"src/component/SignUp.js":{"content":"import { useState } from \"react\";\nimport \"./SignUp.css\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { signUp } from \"../authService\";\nimport { toast } from \"react-toastify\";\n\nexport default function SignUp() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSignUp = async () => {\n    // Ki·ªÉm tra ƒëi·ªÅu ki·ªán tr∆∞·ªõc khi ƒëƒÉng k√Ω\n    if (!email || !password || !confirmPassword) {\n      toast.error(\"Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin!\");\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error(\"M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±!\");\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      toast.error(\"M·∫≠t kh·∫©u kh√¥ng kh·ªõp!\");\n      return;\n    }\n\n    // Th·ª±c hi·ªán ƒëƒÉng k√Ω\n    const success = await signUp(email, password);\n    if (success) {\n      toast.success(\"ƒêƒÉng k√Ω th√†nh c√¥ng! Vui l√≤ng ƒëƒÉng nh·∫≠p.\");\n      navigate(\"/signin\");\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>ƒêƒÉng K√Ω</h2>\n      <input\n        type=\"email\"\n        placeholder=\"Email m·ªõi\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n      />\n      <input\n        type=\"password\"\n        placeholder=\"M·∫≠t kh·∫©u\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <input\n        type=\"password\"\n        placeholder=\"X√°c nh·∫≠n m·∫≠t kh·∫©u\"\n        value={confirmPassword}\n        onChange={(e) => setConfirmPassword(e.target.value)}\n      />\n      <button\n        className=\"auth-btn-primary\"\n        onClick={handleSignUp}\n      >\n        T·∫°o t√†i kho·∫£n\n      </button>\n      <Link to=\"/signin\" className=\"auth-link\">\n        ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p\n      </Link>\n    </div>\n  );\n}\n","size_bytes":1921},"src/component/Home.js":{"content":"import React, { useState, useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport Navbar from \"./Navbar\";\nimport Hero from \"./Hero\";\nimport { activityThresholds, analyzeHeartData, getSuggestedActivity } from \"../utils/heartrules\";\nimport mqtt from \"mqtt\";\nimport {\n  LineChart,\n  Line,\n  XAxis,\n  YAxis,\n  Tooltip,\n  CartesianGrid,\n  ResponsiveContainer,\n  Label,\n} from \"recharts\";\nimport \"./Home.css\";\nimport { motion } from \"framer-motion\";\n\nexport default function Home() {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n\n  const [bpm, setBpm] = useState(null);\n  const [spo2, setSpo2] = useState(null);\n  const [temp, setTemp] = useState(null);\n  const [ir, setIr] = useState(null);\n  const [chartData, setChartData] = useState([]);\n  const [chartType, setChartType] = useState(\"BPM\");\n\n  const lastValueRef = useRef({ bpm: 0, spo2: 0, ir: 0, temp: 0 });\n  const [status, setStatus] = useState({ text: \"Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu\", type: \"none\" });\n  const [isNoData, setIsNoData] = useState(false);\n\n  const [uid, setUid] = useState(null);\n  const [activityMode, setActivityMode] = useState(\"Ngh·ªâ ng∆°i\");\n  const [showActivityDropdown, setShowActivityDropdown] = useState(false);\n  const [showWarningPopup, setShowWarningPopup] = useState(false);\n  const [showErrorPopup, setShowErrorPopup] = useState(false);\n  const [showAlertPopup, setShowAlertPopup] = useState(false);\n  const [warningMessage, setWarningMessage] = useState(\"\");\n  const [countdownTime, setCountdownTime] = useState(10);\n  const [recentBpmValues, setRecentBpmValues] = useState([]);\n  const [suggestedActivity, setSuggestedActivity] = useState(null);\n  \n  // Refs for timers\n  const warningTimerRef = useRef(null);\n  const countdownTimerRef = useRef(null);\n  const noDataTimerRef = useRef(null);\n\n  // Activity thresholds\n  const activityThresholds = {\n    \"Ngh·ªâ ng∆°i\": { min: 60, max: 94 },\n    \"Ho·∫°t ƒë·ªông nh·∫π\": { min: 95, max: 120 },\n    \"V·∫≠n ƒë·ªông m·∫°nh\": { min: 121, max: 160 },\n    \"Ng·ªß\": { min: 50, max: 85 }\n  };\n\n  // ‚úÖ Check auth v√† l·∫•y UID\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setLoading(false);\n      if (!user) {\n        navigate(\"/signin\");\n      } else {\n        setUid(user.uid);\n      }\n    });\n    return () => unsubscribe();\n  }, [navigate]);\n\n  // ‚úÖ MQTT connect (update chart theo g√≥i d·ªØ li·ªáu)\n  useEffect(() => {\n    if (!uid) return; // ƒë·ª£i c√≥ UID m·ªõi k·∫øt n·ªëi MQTT\n\n    // Kh√¥i ph·ª•c d·ªØ li·ªáu t·ª´ localStorage n·∫øu c√≥\n    const savedData = localStorage.getItem(\"healthData\");\n    if (savedData) {\n      const parsedData = JSON.parse(savedData);\n      setChartData(parsedData.chartData || []);\n      lastValueRef.current = parsedData.lastValue || { bpm: 0, spo2: 0, ir: 0, temp: 0 };\n      setBpm(parsedData.lastValue?.bpm || null);\n      setSpo2(parsedData.lastValue?.spo2 || null);\n      setTemp(parsedData.lastValue?.temp || null);\n      setIr(parsedData.lastValue?.ir || null);\n    }\n\n    const client = mqtt.connect(\"wss://broker.emqx.io:8084/mqtt\");\n\n    client.on(\"connect\", () => {\n      console.log(\"Connected to MQTT\");\n      // ‚úÖ Subscribe theo UID\n      client.subscribe(`thongtinbenhnhan/${uid}`);\n    });\n\n    const handleMessage = (topic, message) => {\n      try {\n        const data = JSON.parse(message.toString());\n        const newBpm = data.BPM !== -999 ? data.BPM : lastValueRef.current.bpm;\n        const newSpo2 = data.SpO2 !== -999 ? data.SpO2 : lastValueRef.current.spo2;\n        const newTemp = data.TempC !== -999 ? data.TempC : lastValueRef.current.temp;\n        const newIr = data.IR !== -999 ? data.IR : lastValueRef.current.ir;\n\n        // l∆∞u gi√° tr·ªã m·ªõi v√†o ref\n        const newValues = { bpm: newBpm, spo2: newSpo2, ir: newIr, temp: newTemp };\n        lastValueRef.current = newValues;\n\n        // clear no-data state because we just received data\n        if (isNoData) {\n          setIsNoData(false);\n        }\n\n        // Reset/refresh the no-data timer whenever a message arrives\n        if (noDataTimerRef.current) {\n          clearTimeout(noDataTimerRef.current);\n        }\n        // If no message arrives within 3s, reset values and push a zero datapoint to chart\n        noDataTimerRef.current = setTimeout(() => {\n          const zeroValues = { bpm: 0, spo2: 0, ir: 0, temp: 0 };\n          lastValueRef.current = zeroValues;\n          setBpm(0);\n          setSpo2(0);\n          setTemp(0);\n          setIr(0);\n\n          // mark no data state and set a visible status card\n          setIsNoData(true);\n          setStatus({ text: \"Ch∆∞a nh·∫≠n d·ªØ li·ªáu t·ª´ c·∫£m bi·∫øn\", type: \"none\" });\n\n          const nowZero = new Date().toLocaleTimeString(\"vi-VN\", {\n            hour12: false,\n            timeStyle: \"medium\",\n          });\n\n          // push a zero point so chart reflects no-data\n          setChartData(prev => {\n            const newChartData = [...prev.slice(-49), { time: nowZero, bpm: 0, spo2: 0, ir: 0 }];\n            // also update localStorage similar to normal flow\n            const dataToStore = {\n              chartData: newChartData,\n              lastValue: zeroValues,\n              timestamp: nowZero,\n            };\n            localStorage.setItem(\"healthData\", JSON.stringify(dataToStore));\n            return newChartData;\n          });\n        }, 3000);\n\n        // ‚úÖ update chart ngay (theo ƒë√∫ng t·ªëc ƒë·ªô MQTT 0.1s)\n        const now = new Date().toLocaleTimeString(\"vi-VN\", {\n          hour12: false,\n          timeStyle: \"medium\",\n        });\n\n        setChartData((prev) => {\n          const newChartData = [\n            ...prev.slice(-49),\n            {\n              time: now,\n              bpm: newBpm,\n              spo2: newSpo2,\n              ir: newIr,\n            },\n          ];\n\n          // L∆∞u v√†o localStorage\n          const dataToStore = {\n            chartData: newChartData,\n            lastValue: newValues,\n            timestamp: now,\n          };\n          localStorage.setItem(\"healthData\", JSON.stringify(dataToStore));\n\n          return newChartData;\n        });\n\n        // C·∫≠p nh·∫≠t c√°c gi√° tr·ªã hi·ªán t·∫°i\n        setBpm(newBpm);\n        setSpo2(newSpo2);\n        setTemp(newTemp);\n        setIr(newIr);\n      } catch (err) {\n        console.error(\"Error parsing MQTT:\", err);\n      }\n    };\n\n    client.on(\"message\", handleMessage);\n\n    return () => {\n      client.unsubscribe(`thongtinbenhnhan/${uid}`);\n      if (noDataTimerRef.current) {\n        clearTimeout(noDataTimerRef.current);\n        noDataTimerRef.current = null;\n      }\n      client.end();\n    };\n  }, [uid]);\n\n  // Theo d√µi BPM g·∫ßn ƒë√¢y v√† ki·ªÉm tra ng∆∞·ª°ng\n  useEffect(() => {\n    if (bpm === null) return;\n\n    // C·∫≠p nh·∫≠t danh s√°ch BPM g·∫ßn ƒë√¢y\n    setRecentBpmValues(prev => [...prev.slice(-5), bpm]);\n\n    // Ch·ªâ ki·ªÉm tra sau khi c√≥ ƒë·ªß 5 gi√° tr·ªã\n    if (recentBpmValues.length >= 5) {\n      const avgRecentBpm = recentBpmValues.reduce((a, b) => a + b, 0) / recentBpmValues.length;\n      const analysis = analyzeHeartData(avgRecentBpm, spo2, temp, activityMode);\n      \n      if (analysis.warnings.length > 0 && analysis.isActivityChange) {\n        // Clear timers c≈©\n        if (warningTimerRef.current) {\n          clearTimeout(warningTimerRef.current);\n          warningTimerRef.current = null;\n        }\n        if (countdownTimerRef.current) {\n          clearInterval(countdownTimerRef.current);\n          countdownTimerRef.current = null;\n        }\n\n        setSuggestedActivity(analysis.suggestedActivity);\n        setCountdownTime(10);\n        setShowWarningPopup(true);\n        \n        // B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c v√† c·∫≠p nh·∫≠t message\n        const countdownInterval = setInterval(() => {\n          setCountdownTime(prev => {\n            const newCount = prev - 1;\n            if (newCount <= 0) {\n              clearInterval(countdownInterval);\n              if (showWarningPopup) {\n                setShowWarningPopup(false);\n                setShowAlertPopup(true);\n              }\n              return 0;\n            }\n            // C·∫≠p nh·∫≠t message v·ªõi th·ªùi gian ƒë·∫øm ng∆∞·ª£c\n            setWarningMessage(`B·∫°n ƒëang ${analysis.suggestedActivity.toLowerCase()} ph·∫£i kh√¥ng? (${newCount}s)`);\n            return newCount;\n          });\n        }, 1000);\n\n        // Set ban ƒë·∫ßu cho message\n        setWarningMessage(`B·∫°n ƒëang ${analysis.suggestedActivity.toLowerCase()} ph·∫£i kh√¥ng? (10s)`);\n\n        // Set timer cho popup\n        const warningTimeout = setTimeout(() => {\n          if (showWarningPopup) {\n            setShowWarningPopup(false);\n            setShowAlertPopup(true);\n            setStatus({ \n              text: \"B√°o ƒë·ªông! Nh·ªãp tim c·ª±c k√¨ b·∫•t th∆∞·ªùng\", \n              type: \"alert\" \n            });\n          }\n        }, 10000);\n\n        countdownTimerRef.current = countdownInterval;\n        warningTimerRef.current = warningTimeout;\n      }\n    }\n\n    // Cleanup function\n    return () => {\n      if (warningTimerRef.current) clearTimeout(warningTimerRef.current);\n      if (countdownTimerRef.current) clearInterval(countdownTimerRef.current);\n    };\n  }, [bpm, activityMode, spo2, temp, showWarningPopup]);\n\n  // th√™m useEffect ƒë·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i\n  useEffect(() => {\n    if (isNoData) return; // don't override the explicit no-data status\n\n    if (bpm === null || spo2 === null || temp === null) {\n      setStatus({ text: \"Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu\", type: \"none\" });\n    } else {\n      const analysis = analyzeHeartData(bpm, spo2, temp, activityMode);\n      \n      if (analysis.warnings.length === 0) {\n        setStatus({ \n          text: `Tr·∫°ng th√°i: ·ªïn ƒë·ªãnh (${activityMode})`, \n          type: \"normal\" \n        });\n      } else {\n        if (!showWarningPopup && !showAlertPopup) {\n          setStatus({ \n            text: `Tr·∫°ng th√°i: ${analysis.warnings.join(\", \")}`, \n            type: \"alert\" \n          });\n        }\n      }\n    }\n  }, [bpm, spo2, temp, activityMode, showWarningPopup, showAlertPopup]);\n\n  // ‚úÖ Card update m·ªói 1s (kh√¥ng ph·ª• thu·ªôc t·ªëc ƒë·ªô MQTT)\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setBpm(lastValueRef.current.bpm);\n      setSpo2(lastValueRef.current.spo2);\n      setTemp(lastValueRef.current.temp);\n      setIr(lastValueRef.current.ir);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  // ‚úÖ Custom Line component animate theo path d\n  const MotionLine = ({ path, stroke }) => (\n    <motion.path\n      d={path}\n      stroke={stroke}\n      strokeWidth=\"2\"\n      fill=\"none\"\n      animate={{ d: path }}\n      transition={{ duration: 0.1, ease: \"linear\" }}\n    />\n  );\n\n  return (\n    <>\n      <Navbar />\n      <Hero status={status} />\n      <div className=\"home-container\">\n        {/* LEFT */}\n        <div className=\"left-panel\">\n          <h2 className=\"section-title\">Ch·ªâ s·ªë hi·ªán t·∫°i</h2>\n          <div className=\"activity-button\" onClick={() => setShowActivityDropdown(!showActivityDropdown)}>\n            Ch·∫ø ƒë·ªô v·∫≠n ƒë·ªông: {activityMode}\n            {showActivityDropdown && (\n              <div className=\"activity-dropdown\">\n                {Object.keys(activityThresholds).map(mode => (\n                  <div \n                    key={mode} \n                    className=\"activity-option\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setActivityMode(mode);\n                      setShowActivityDropdown(false);\n                    }}\n                  >\n                    {mode}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {showWarningPopup && (\n            <div className=\"popup-overlay\">\n              <div className=\"popup-content\">\n                <div className=\"countdown-display\">{countdownTime}s</div>\n                <h3>B·∫°n ƒëang {suggestedActivity?.toLowerCase()} ph·∫£i kh√¥ng?</h3>\n                <div className=\"popup-buttons\">\n                  <button onClick={() => {\n                    // Clear all timers\n                    if (warningTimerRef.current) clearTimeout(warningTimerRef.current);\n                    if (countdownTimerRef.current) clearInterval(countdownTimerRef.current);\n                    \n                    setShowWarningPopup(false);\n                    setActivityMode(suggestedActivity);\n                    setStatus({ \n                      text: `Tr·∫°ng th√°i: ${suggestedActivity} - ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i`, \n                      type: \"normal\" \n                    });\n                  }}>C√≥</button>\n                  <button onClick={() => {\n                    // Clear all timers\n                    if (warningTimerRef.current) clearTimeout(warningTimerRef.current);\n                    if (countdownTimerRef.current) clearInterval(countdownTimerRef.current);\n                    \n                    setShowWarningPopup(false);\n                    setShowErrorPopup(true);\n                  }}>Kh√¥ng</button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {showErrorPopup && (\n            <div className=\"popup-overlay\">\n              <div className=\"popup-content error\">\n                <h3>L·ªói thi·∫øt b·ªã, vui l√≤ng ki·ªÉm tra</h3>\n                <button onClick={() => setShowErrorPopup(false)}>ƒê√≥ng</button>\n              </div>\n            </div>\n          )}\n\n          {showAlertPopup && (\n            <div className=\"popup-overlay\">\n              <div className=\"popup-content alert\">\n                <h3>B√°o ƒë·ªông! Nh·ªãp tim c·ª±c k√¨ b·∫•t th∆∞·ªùng</h3>\n                <button onClick={() => setShowAlertPopup(false)}>ƒê√≥ng</button>\n              </div>\n            </div>\n          )}\n\n          <div className=\"info-card heart\">\n            <div className=\"icon\">‚ù§Ô∏è</div>\n            <div className=\"info-content\">\n              <p className=\"info-title\">Nh·ªãp tim</p>\n              <p className=\"info-value\">{bpm ?? \"--\"} BPM</p>\n            </div>\n          </div>\n\n          <div className=\"info-card spo2\">\n            <div className=\"icon\">ü´Å</div>\n            <div className=\"info-content\">\n              <p className=\"info-title\">SpO‚ÇÇ</p>\n              <p className=\"info-value\">{spo2 ?? \"--\"} %</p>\n            </div>\n          </div>\n\n          <div className=\"info-card temp\">\n            <div className=\"icon\">üå°Ô∏è</div>\n            <div className=\"info-content\">\n              <p className=\"info-title\">Nhi·ªát ƒë·ªô</p>\n              <p className=\"info-value\">{temp ?? \"--\"} ¬∞C</p>\n            </div>\n          </div>\n        </div>\n\n        {/* RIGHT */}\n        <div className=\"right-panel\">\n          <div className=\"chart-toggle\">\n            <button\n              className={chartType === \"BPM\" ? \"active\" : \"\"}\n              onClick={() => setChartType(\"BPM\")}\n            >\n              S∆° ƒë·ªì nh·ªãp tim\n            </button>\n            <button\n              className={chartType === \"SpO2\" ? \"active\" : \"\"}\n              onClick={() => setChartType(\"SpO2\")}\n            >\n              S∆° ƒë·ªì SpO‚ÇÇ\n            </button>\n            <button\n              className={chartType === \"IR\" ? \"active\" : \"\"}\n              onClick={() => setChartType(\"IR\")}\n            >\n              S∆° ƒë·ªì t√≠n hi·ªáu PPG\n            </button>\n          </div>\n\n          <h3>\n            {chartType === \"BPM\"\n              ? \"S∆° ƒë·ªì nh·ªãp tim\"\n              : chartType === \"SpO2\"\n              ? \"S∆° ƒë·ªì SpO‚ÇÇ\"\n              : \"S∆° ƒë·ªì t√≠n hi·ªáu PPG\"}\n          </h3>\n\n          <ResponsiveContainer width=\"100%\" height={350}>\n            <LineChart\n              data={chartData}\n              margin={{ top: 20, right: 20, left: 10, bottom: 20 }}\n              style={{ backgroundColor: \"#fff\" }}\n            >\n              <motion.g\n                key={chartData.length}\n                initial={{ x: 0 }}\n                animate={{ x: -15 }}\n                transition={{ duration: 0.12, ease: \"linear\" }}\n              >\n                <CartesianGrid stroke=\"#e0e0e0\" strokeDasharray=\"3 3\" />\n                <XAxis\n                  dataKey=\"time\"\n                  tick={{ fill: \"#333\", fontSize: 12 }}\n                  axisLine={{ stroke: \"#333\" }}\n                >\n                  <Label\n                    value=\"Th·ªùi gian\"\n                    offset={-5}\n                    position=\"insideBottom\"\n                    fill=\"#333\"\n                  />\n                </XAxis>\n\n                {chartType === \"BPM\" && (\n                  <YAxis\n                    domain={[40, 140]}\n                    tick={{ fill: \"#333\", fontSize: 12 }}\n                    axisLine={{ stroke: \"#333\" }}\n                  >\n                    <Label\n                      value=\"BPM\"\n                      angle={-90}\n                      position=\"insideLeft\"\n                      fill=\"#333\"\n                    />\n                  </YAxis>\n                )}\n                {chartType === \"SpO2\" && (\n                  <YAxis\n                    domain={[80, 100]}\n                    tick={{ fill: \"#333\", fontSize: 12 }}\n                    axisLine={{ stroke: \"#333\" }}\n                  >\n                    <Label\n                      value=\"%\"\n                      angle={-90}\n                      position=\"insideLeft\"\n                      fill=\"#333\"\n                    />\n                  </YAxis>\n                )}\n                {chartType === \"IR\" && (\n                  <YAxis\n                    tick={{ fill: \"#333\", fontSize: 12 }}\n                    axisLine={{ stroke: \"#333\" }}\n                  >\n                    <Label\n                      value=\"PPG\"\n                      angle={-90}\n                      position=\"insideLeft\"\n                      fill=\"#333\"\n                    />\n                  </YAxis>\n                )}\n\n                <Tooltip\n                  contentStyle={{ backgroundColor: \"#fff\", border: \"1px solid #ccc\" }}\n                  labelStyle={{ color: \"#333\" }}\n                  itemStyle={{ color: \"#333\" }}\n                />\n\n                {chartType === \"BPM\" && (\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"bpm\"\n                    stroke=\"#00b300\"\n                    strokeWidth={2}\n                    dot={false}\n                    isAnimationActive={false}\n                    content={({ points }) => {\n                      const path = `M${points\n                        .map((p) => `${p.x},${p.y}`)\n                        .join(\"L\")}`;\n                      return <MotionLine path={path} stroke=\"#00b300\" />;\n                    }}\n                  />\n                )}\n                {chartType === \"SpO2\" && (\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"spo2\"\n                    stroke=\"#00bfff\"\n                    strokeWidth={2}\n                    dot={false}\n                    isAnimationActive={false}\n                    content={({ points }) => {\n                      const path = `M${points\n                        .map((p) => `${p.x},${p.y}`)\n                        .join(\"L\")}`;\n                      return <MotionLine path={path} stroke=\"#00bfff\" />;\n                    }}\n                  />\n                )}\n                {chartType === \"IR\" && (\n                  <Line\n                    type=\"monotone\"\n                    dataKey=\"ir\"\n                    stroke=\"#ff9900\"\n                    strokeWidth={2}\n                    dot={false}\n                    isAnimationActive={false}\n                    content={({ points }) => {\n                      const path = `M${points\n                        .map((p) => `${p.x},${p.y}`)\n                        .join(\"L\")}`;\n                      return <MotionLine path={path} stroke=\"#ff9900\" />;\n                    }}\n                  />\n                )}\n              </motion.g>\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":20449},"src/component/Navbar.js":{"content":"import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { logout } from '../authService';\nimport './Navbar.css';\n\nexport default function Navbar() {\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setUser(user);\n    });\n\n    return () => unsubscribe();\n  }, []);\n\n  const handleLogout = async () => {\n    await logout();\n    navigate('/signin');\n  };\n\n  return (\n    <nav className=\"navbar\">\n      <Link to=\"/\" className=\"navbar-logo\">\n  <img src=\"/logobk.jpg\" alt=\"Logo\" className=\"logo-img\" />\n</Link>\n      <ul className=\"navbar-menu\">\n        <li><Link to=\"/\">Nh·ªãp tim</Link></li>\n        <li><Link to=\"/health-history\">L·ªãch s·ª≠ b√°o ƒë·ªông</Link></li>\n        <li><Link to=\"/device-settings\">Thi·∫øt l·∫≠p thi·∫øt b·ªã</Link></li>\n      </ul>\n      {user && (\n        <div className=\"user-controls\">\n          <img \n            src={user.photoURL || '/default-avatar.png'} \n            alt=\"Avatar\" \n            className=\"user-avatar\" \n          />\n          <span className=\"user-email\">{user.email}</span>\n        </div>\n      )}\n    </nav>\n  );\n}\n","size_bytes":1316},"src/component/DeviceSettings.js":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { auth, db, storage } from '../firebase';\nimport { \n  onAuthStateChanged, \n  signOut, \n  updatePassword, \n  reauthenticateWithCredential, \n  EmailAuthProvider,\n  updateProfile \n} from 'firebase/auth';\nimport { doc, updateDoc, getDoc } from 'firebase/firestore';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport mqtt from 'mqtt';\nimport Navbar from './Navbar';\nimport './DeviceSettings.css';\n\nexport default function DeviceSettings() {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [user, setUser] = useState(null);\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [age, setAge] = useState('');\n  const [name, setName] = useState('');\n  const [addr, setAddr] = useState('');\n  const [date, setDate] = useState('');\n  const [time, setTime] = useState('');\n  const [wifi, setWifi] = useState({\n    ssid: '',\n    password: ''\n  });\n  const [passwordChange, setPasswordChange] = useState({\n    oldPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  });\n  const [avatarFile, setAvatarFile] = useState(null);\n  const [showMessage, setShowMessage] = useState({ text: '', type: '' });\n  const [activeTab, setActiveTab] = useState('account');\n  const messageTimeoutRef = useRef(null);\n  const mqttClientRef = useRef(null);\n  const fileInputRef = useRef(null);\n\n  // Danh s√°ch t·ªânh th√†nh Vi·ªát Nam\n  const provinces = [\n    'H√† N·ªôi', 'TP H·ªì Ch√≠ Minh', 'ƒê√† N·∫µng', 'H·∫£i Ph√≤ng', 'C·∫ßn Th∆°',\n    'An Giang', 'B√† R·ªãa - V≈©ng T√†u', 'B·∫Øc Giang', 'B·∫Øc K·∫°n', 'B·∫°c Li√™u',\n    'B·∫Øc Ninh', 'B·∫øn Tre', 'B√¨nh ƒê·ªãnh', 'B√¨nh D∆∞∆°ng', 'B√¨nh Ph∆∞·ªõc',\n    'B√¨nh Thu·∫≠n', 'C√† Mau', 'Cao B·∫±ng', 'ƒê·∫Øk L·∫Øk', 'ƒê·∫Øk N√¥ng',\n    'ƒêi·ªán Bi√™n', 'ƒê·ªìng Nai', 'ƒê·ªìng Th√°p', 'Gia Lai', 'H√† Giang',\n    'H√† Nam', 'H√† Tƒ©nh', 'H·∫£i D∆∞∆°ng', 'H·∫≠u Giang', 'H√≤a B√¨nh',\n    'H∆∞ng Y√™n', 'Kh√°nh H√≤a', 'Ki√™n Giang', 'Kon Tum', 'Lai Ch√¢u',\n    'L√¢m ƒê·ªìng', 'L·∫°ng S∆°n', 'L√†o Cai', 'Long An', 'Nam ƒê·ªãnh',\n    'Ngh·ªá An', 'Ninh B√¨nh', 'Ninh Thu·∫≠n', 'Ph√∫ Th·ªç', 'Ph√∫ Y√™n',\n    'Qu·∫£ng B√¨nh', 'Qu·∫£ng Nam', 'Qu·∫£ng Ng√£i', 'Qu·∫£ng Ninh', 'Qu·∫£ng Tr·ªã',\n    'S√≥c TrƒÉng', 'S∆°n La', 'T√¢y Ninh', 'Th√°i B√¨nh', 'Th√°i Nguy√™n',\n    'Thanh H√≥a', 'Th·ª´a Thi√™n Hu·∫ø', 'Ti·ªÅn Giang', 'Tr√† Vinh', 'Tuy√™n Quang',\n    'Vƒ©nh Long', 'Vƒ©nh Ph√∫c', 'Y√™n B√°i'\n  ];\n\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setLoading(false);\n      if (user) {\n        setUser(user);\n        // Fetch user data from Firestore\n        const fetchUserData = async () => {\n          const userDoc = await getDoc(doc(db, 'users', user.uid));\n          if (userDoc.exists()) {\n            const userData = userDoc.data();\n            setPhoneNumber(userData.phoneNumber || '');\n            setAge(userData.age || '');\n            setName(userData.name || '');\n            setAddr(userData.addr || '');\n          }\n        };\n        fetchUserData();\n\n        // Setup MQTT connection\n        const client = mqtt.connect('wss://broker.emqx.io:8084/mqtt');\n        mqttClientRef.current = client;\n\n        client.on('connect', () => {\n          console.log('MQTT Connected');\n        });\n\n      } else {\n        navigate('/signin');\n      }\n    });\n\n    return () => {\n      unsubscribe();\n      if (mqttClientRef.current) {\n        mqttClientRef.current.end();\n      }\n    };\n  }, [navigate]);\n\n  useEffect(() => {\n    if (showMessage.text) {\n      if (messageTimeoutRef.current) {\n        clearTimeout(messageTimeoutRef.current);\n      }\n      messageTimeoutRef.current = setTimeout(() => {\n        setShowMessage({ text: '', type: '' });\n      }, 3000);\n    }\n    return () => {\n      if (messageTimeoutRef.current) {\n        clearTimeout(messageTimeoutRef.current);\n      }\n    };\n  }, [showMessage.text]);\n\n  const handleAvatarChange = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 5 * 1024 * 1024) {\n        setShowMessage({ text: '·∫¢nh kh√¥ng ƒë∆∞·ª£c qu√° 5MB', type: 'error' });\n        return;\n      }\n      if (!file.type.startsWith('image/')) {\n        setShowMessage({ text: 'Vui l√≤ng ch·ªçn file ·∫£nh', type: 'error' });\n        return;\n      }\n      setAvatarFile(file);\n    }\n  };\n\n  const handleAccountSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (user) {\n        // Update user info in Firestore\n        await updateDoc(doc(db, 'users', user.uid), {\n          phoneNumber,\n          age,\n          name,\n          addr\n        });\n\n        // Upload avatar if selected\n        if (avatarFile) {\n          const storageRef = ref(storage, `avatars/${user.uid}`);\n          await uploadBytes(storageRef, avatarFile);\n          const downloadURL = await getDownloadURL(storageRef);\n          await updateProfile(user, { photoURL: downloadURL });\n        }\n\n        setShowMessage({ text: 'Th√¥ng tin t√†i kho·∫£n ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t!', type: 'success' });\n        setAvatarFile(null);\n        if (fileInputRef.current) {\n          fileInputRef.current.value = '';\n        }\n      }\n    } catch (error) {\n      setShowMessage({ text: 'C√≥ l·ªói x·∫£y ra: ' + error.message, type: 'error' });\n    }\n  };\n\n  const handlePasswordSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (!user) {\n        throw new Error('Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i');\n      }\n\n      if (passwordChange.newPassword !== passwordChange.confirmPassword) {\n        throw new Error('M·∫≠t kh·∫©u m·ªõi kh√¥ng kh·ªõp');\n      }\n\n      if (passwordChange.newPassword.length < 6) {\n        throw new Error('M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±');\n      }\n\n      const credential = EmailAuthProvider.credential(\n        user.email,\n        passwordChange.oldPassword\n      );\n      await reauthenticateWithCredential(user, credential);\n\n      await updatePassword(user, passwordChange.newPassword);\n\n      setPasswordChange({\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      });\n      setShowMessage({ text: 'ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng!', type: 'success' });\n    } catch (error) {\n      let errorMessage = 'C√≥ l·ªói x·∫£y ra: ';\n      switch (error.code) {\n        case 'auth/wrong-password':\n          errorMessage += 'M·∫≠t kh·∫©u c≈© kh√¥ng ch√≠nh x√°c';\n          break;\n        case 'auth/weak-password':\n          errorMessage += 'M·∫≠t kh·∫©u m·ªõi qu√° y·∫øu';\n          break;\n        default:\n          errorMessage += error.message;\n      }\n      setShowMessage({ text: errorMessage, type: 'error' });\n    }\n  };\n\n  const handleDeviceSubmit = (e) => {\n    e.preventDefault();\n    try {\n      if (user && mqttClientRef.current) {\n        const deviceSettings = {\n          Date: date,\n          Time: time,\n          Wifi: wifi.ssid,\n          Pass: wifi.password\n        };\n        \n        mqttClientRef.current.publish(\n          `thongtinbenhnhan/${user.uid}`,\n          JSON.stringify(deviceSettings)\n        );\n        \n        setShowMessage({ text: 'ƒê√£ c·∫≠p nh·∫≠t thi·∫øt l·∫≠p thi·∫øt b·ªã!', type: 'success' });\n      }\n    } catch (error) {\n      setShowMessage({ text: 'C√≥ l·ªói x·∫£y ra: ' + error.message, type: 'error' });\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      navigate('/signin');\n    } catch (error) {\n      setShowMessage({ text: 'C√≥ l·ªói khi ƒëƒÉng xu·∫•t: ' + error.message, type: 'error' });\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"settings-container\">\n        <div className=\"settings-layout\">\n          <div className=\"settings-sidebar\">\n            <div \n              className={`sidebar-item ${activeTab === 'account' ? 'active' : ''}`}\n              onClick={() => setActiveTab('account')}\n            >\n              Thi·∫øt l·∫≠p t√†i kho·∫£n\n            </div>\n            <div \n              className={`sidebar-item ${activeTab === 'device' ? 'active' : ''}`}\n              onClick={() => setActiveTab('device')}\n            >\n              Thi·∫øt l·∫≠p thi·∫øt b·ªã\n            </div>\n            <div \n              className={`sidebar-item ${activeTab === 'password' ? 'active' : ''}`}\n              onClick={() => setActiveTab('password')}\n            >\n              ƒê·ªïi m·∫≠t kh·∫©u\n            </div>\n            <div className=\"sidebar-divider\"></div>\n            <div className=\"sidebar-item logout\" onClick={handleLogout}>\n              ƒêƒÉng xu·∫•t\n            </div>\n          </div>\n\n          <div className=\"settings-content\">\n            {showMessage.text && (\n              <div className={`message ${showMessage.type}`}>\n                {showMessage.text}\n              </div>\n            )}\n\n            {activeTab === 'account' ? (\n              <div className=\"settings-section\">\n                <h2>Thi·∫øt l·∫≠p t√†i kho·∫£n</h2>\n                <form onSubmit={handleAccountSubmit}>\n                  <div className=\"form-group\">\n                    <label>Email ƒëƒÉng nh·∫≠p:</label>\n                    <input\n                      type=\"text\"\n                      value={user?.email || ''}\n                      disabled\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>H·ªç v√† t√™n:</label>\n                    <input\n                      type=\"text\"\n                      value={name}\n                      onChange={(e) => setName(e.target.value)}\n                      placeholder=\"Nh·∫≠p h·ªç v√† t√™n\"\n                      required\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Tu·ªïi:</label>\n                    <input\n                      type=\"number\"\n                      value={age}\n                      onChange={(e) => setAge(e.target.value)}\n                      placeholder=\"Nh·∫≠p tu·ªïi\"\n                      required\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Khu v·ª±c t·ªânh th√†nh:</label>\n                    <select\n                      value={addr}\n                      onChange={(e) => setAddr(e.target.value)}\n                      required\n                    >\n                      <option value=\"\">-- Ch·ªçn t·ªânh/th√†nh ph·ªë --</option>\n                      {provinces.map((province, idx) => (\n                        <option key={idx} value={province}>{province}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div className=\"form-group\">\n                    <label>S·ªë ƒëi·ªán tho·∫°i:</label>\n                    <input\n                      type=\"tel\"\n                      value={phoneNumber}\n                      onChange={(e) => setPhoneNumber(e.target.value)}\n                      placeholder=\"Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i\"\n                      pattern=\"[0-9]{10}\"\n                      required\n                    />\n                  </div>\n                  <button type=\"submit\">L∆∞u th√¥ng tin</button>\n                </form>\n              </div>\n            ) : activeTab === 'password' ? (\n              <div className=\"settings-section\">\n                <h2>ƒê·ªïi m·∫≠t kh·∫©u</h2>\n                <form onSubmit={handlePasswordSubmit}>\n                  <div className=\"form-group\">\n                    <label>M·∫≠t kh·∫©u c≈©:</label>\n                    <input\n                      type=\"password\"\n                      value={passwordChange.oldPassword}\n                      onChange={(e) => setPasswordChange({\n                        ...passwordChange,\n                        oldPassword: e.target.value\n                      })}\n                      placeholder=\"Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i\"\n                      required\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>M·∫≠t kh·∫©u m·ªõi:</label>\n                    <input\n                      type=\"password\"\n                      value={passwordChange.newPassword}\n                      onChange={(e) => setPasswordChange({\n                        ...passwordChange,\n                        newPassword: e.target.value\n                      })}\n                      placeholder=\"Nh·∫≠p m·∫≠t kh·∫©u m·ªõi\"\n                      required\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi:</label>\n                    <input\n                      type=\"password\"\n                      value={passwordChange.confirmPassword}\n                      onChange={(e) => setPasswordChange({\n                        ...passwordChange,\n                        confirmPassword: e.target.value\n                      })}\n                      placeholder=\"Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi\"\n                      required\n                    />\n                  </div>\n                  <button type=\"submit\">X√°c nh·∫≠n</button>\n                </form>\n              </div>\n            ) : (\n              <div className=\"settings-section\">\n                <h2>Thi·∫øt l·∫≠p thi·∫øt b·ªã</h2>\n                <form onSubmit={handleDeviceSubmit}>\n                  <div className=\"form-group\">\n                    <label>Ng√†y:</label>\n                    <input\n                      type=\"date\"\n                      value={date}\n                      onChange={(e) => setDate(e.target.value)}\n                      required\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>Th·ªùi gian:</label>\n                    <input\n                      type=\"time\"\n                      value={time}\n                      onChange={(e) => setTime(e.target.value)}\n                      required\n                      step=\"1\"\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>T√™n WiFi:</label>\n                    <input\n                      type=\"text\"\n                      value={wifi.ssid}\n                      onChange={(e) => setWifi({ ...wifi, ssid: e.target.value })}\n                      placeholder=\"T√™n m·∫°ng WiFi\"\n                      required\n                    />\n                  </div>\n                  <div className=\"form-group\">\n                    <label>M·∫≠t kh·∫©u WiFi:</label>\n                    <input\n                      type=\"password\"\n                      value={wifi.password}\n                      onChange={(e) => setWifi({ ...wifi, password: e.target.value })}\n                      placeholder=\"M·∫≠t kh·∫©u WiFi\"\n                      required\n                    />\n                  </div>\n                  <button type=\"submit\">L∆∞u thi·∫øt l·∫≠p</button>\n                </form>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":15273},"src/component/HealthHistory.js":{"content":"import React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport mqtt from 'mqtt';\nimport { analyzeHeartData } from '../utils/heartrules';\nimport Navbar from './Navbar';\nimport './HealthHistory.css';\n\nexport default function HealthHistory() {\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [uid, setUid] = useState(null);\n\n  const [healthData, setHealthData] = useState([]);\n  const [currentData, setCurrentData] = useState({\n    bpm: null,\n    spo2: null,\n    temp: null,\n    ir: null\n  });\n\n  const lastDataRef = useRef(null);\n  const mqttClientRef = useRef(null);\n\n  // ‚úÖ Filter state\n  const [filterOpen, setFilterOpen] = useState(false);\n  const [filterTimeFrom, setFilterTimeFrom] = useState('');\n  const [filterTimeTo, setFilterTimeTo] = useState('');\n  const [filterMetrics, setFilterMetrics] = useState({\n    bpm: false,\n    spo2: false,\n    temp: false\n  });\n  // State to store active filters\n  const [activeFilters, setActiveFilters] = useState({\n    timeFrom: '',\n    timeTo: '',\n    metrics: {\n      bpm: false,\n      spo2: false,\n      temp: false\n    }\n  });\n\n  // Auth\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\n      setLoading(false);\n      if (user) {\n        setUid(user.uid); // ‚úÖ l·∫•y uid ƒë·ªÉ t·∫°o topic ri√™ng\n      } else {\n        navigate('/signin');\n      }\n    });\n    return () => unsubscribe();\n  }, [navigate]);\n\n  // MQTT v√† Data Management\n  useEffect(() => {\n    if (!uid) return;\n\n    // Kh√¥i ph·ª•c d·ªØ li·ªáu t·ª´ localStorage n·∫øu c√≥\n    const savedHealthData = localStorage.getItem(`historyData_${uid}`);\n    if (savedHealthData) {\n      setHealthData(JSON.parse(savedHealthData));\n    }\n\n    const client = mqtt.connect(\"wss://broker.emqx.io:8084/mqtt\");\n    mqttClientRef.current = client;\n\n    const topic = `thongtinbenhnhan/${uid}`;\n\n    client.on(\"connect\", () => {\n      console.log(\"Connected to MQTT\");\n      client.subscribe(topic);\n    });\n\n    const handleMessage = (topic, message) => {\n      try {\n        const data = JSON.parse(message.toString());\n        const prevData = lastDataRef.current || currentData;\n        const newData = {\n          bpm: data.BPM !== -999 ? data.BPM : prevData.bpm,\n          spo2: data.SpO2 !== -999 ? data.SpO2 : prevData.spo2,\n          temp: data.TempC !== -999 ? data.TempC : prevData.temp,\n          ir: data.IR !== -999 ? data.IR : prevData.ir\n        };\n\n        // Use analyzeHeartData to determine warnings/status similarly to Home.js\n        // We don't have activityMode here, default to 'Ngh·ªâ ng∆°i' as in heartrules\n        const analysis = analyzeHeartData(newData.bpm, newData.spo2, newData.temp, 'Ngh·ªâ ng∆°i');\n\n        const now = new Date();\n\n        const dataWithStatus = {\n          ...newData,\n          timestamp: now.toLocaleString('vi-VN', {\n            hour12: false,\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit',\n            second: '2-digit'\n          }),\n          timestampRaw: now.toISOString(), // ‚úÖ th√™m tr∆∞·ªùng ƒë·ªÉ so s√°nh filter\n          status: analysis.warnings.length > 0 ? 'alert' : 'normal',\n          alerts: {\n            bpm: analysis.warnings.includes('Nh·ªãp tim b·∫•t th∆∞·ªùng'),\n            spo2: analysis.warnings.includes('SpO2 th·∫•p'),\n            temp: analysis.warnings.includes('Nhi·ªát ƒë·ªô b·∫•t th∆∞·ªùng') || false\n          }\n        };\n\n        lastDataRef.current = dataWithStatus;\n        setCurrentData(dataWithStatus);\n\n        setHealthData(prev => {\n          const newHealthData = [...prev, dataWithStatus];\n          localStorage.setItem(`historyData_${uid}`, JSON.stringify(newHealthData.slice(-1000)));\n          return newHealthData;\n        });\n      } catch (err) {\n        console.error(\"Error parsing MQTT:\", err);\n      }\n    };\n\n    client.on(\"message\", handleMessage);\n\n    return () => {\n      client.unsubscribe(topic);\n      client.end();\n    };\n  }, [uid]); // ‚úÖ ch·∫°y l·∫°i khi uid thay ƒë·ªïi\n\n  // Filtered data - Ch·ªâ l·∫•y d·ªØ li·ªáu b√°o ƒë·ªông\n  const filteredData = healthData.filter(item => item.status === 'alert');\n\n  // ‚úÖ Apply custom filter\n  const applyFilter = (data) => {\n    return data.filter(item => {\n      if (item.status !== 'alert') return false;\n\n      if (activeFilters.timeFrom || activeFilters.timeTo) {\n        const itemDate = new Date(item.timestampRaw); // d√πng ISO ƒë·ªÉ so s√°nh\n        if (activeFilters.timeFrom) {\n          const fromDate = new Date(activeFilters.timeFrom);\n          if (itemDate < fromDate) return false;\n        }\n        if (activeFilters.timeTo) {\n          const toDate = new Date(activeFilters.timeTo);\n          if (itemDate > toDate) return false;\n        }\n      }\n\n      const selectedMetrics = Object.keys(activeFilters.metrics).filter(k => activeFilters.metrics[k]);\n      if (selectedMetrics.length > 0) {\n        const matched = selectedMetrics.some(metric => item.alerts[metric]);\n        if (!matched) return false;\n      }\n\n      return true;\n    });\n  };\n\n  const dataToShow = applyFilter(filteredData);\n\n  // ‚úÖ Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(10);\n  const totalPages = Math.ceil(dataToShow.length / itemsPerPage);\n  const paginatedData = dataToShow\n    .slice()\n    .reverse()\n    .slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);\n\n  const handlePageChange = (page) => {\n    if (page >= 1 && page <= totalPages) {\n      setCurrentPage(page);\n    }\n  };\n\n  const handleItemsPerPageChange = (e) => {\n    setItemsPerPage(Number(e.target.value));\n    setCurrentPage(1);\n  };\n\n  const handleResetFilter = () => {\n    setFilterTimeFrom('');\n    setFilterTimeTo('');\n    setFilterMetrics({ bpm: false, spo2: false, temp: false });\n    setActiveFilters({\n      timeFrom: '',\n      timeTo: '',\n      metrics: {\n        bpm: false,\n        spo2: false,\n        temp: false\n      }\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"history-container\">\n        <h1>L·ªãch s·ª≠ b√°o ƒë·ªông</h1>\n\n        <div className=\"view-toggle\" style={{ display: 'flex', justifyContent: 'flex-end', alignItems: 'center' }}>\n          <button className=\"filter-toggle-btn\" onClick={() => setFilterOpen(!filterOpen)}>\n            {filterOpen ? 'ƒê√≥ng b·ªô l·ªçc' : 'B·ªô l·ªçc'}\n          </button>\n        </div>\n\n        {filterOpen && (\n          <div className=\"modal-overlay\">\n            <div className=\"filter-panel\">\n              <h2>B·ªô l·ªçc d·ªØ li·ªáu</h2>\n              \n              <div className=\"filter-row\">\n                <label>Kho·∫£ng th·ªùi gian:</label>\n                <div style={{ display: 'flex', gap: '10px' }}>\n                  <div style={{ flex: 1 }}>\n                    <label style={{ fontSize: '14px' }}>T·ª´:</label>\n                    <input \n                      type=\"datetime-local\" \n                      value={filterTimeFrom} \n                      onChange={e => setFilterTimeFrom(e.target.value)}\n                      step=\"1\"\n                    />\n                  </div>\n                  <div style={{ flex: 1 }}>\n                    <label style={{ fontSize: '14px' }}>ƒê·∫øn:</label>\n                    <input \n                      type=\"datetime-local\" \n                      value={filterTimeTo} \n                      onChange={e => setFilterTimeTo(e.target.value)}\n                      step=\"1\"\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"filter-row\">\n                <label>L·ªçc theo lo·∫°i b√°o ƒë·ªông:</label>\n                <div className=\"filter-metrics\">\n                  <label>\n                    <input \n                      type=\"checkbox\" \n                      checked={filterMetrics.bpm} \n                      onChange={() => setFilterMetrics({...filterMetrics, bpm: !filterMetrics.bpm})}\n                    />\n                    Nh·ªãp tim\n                  </label>\n                  <label>\n                    <input \n                      type=\"checkbox\" \n                      checked={filterMetrics.spo2} \n                      onChange={() => setFilterMetrics({...filterMetrics, spo2: !filterMetrics.spo2})}\n                    />\n                    SpO‚ÇÇ\n                  </label>\n                  <label>\n                    <input \n                      type=\"checkbox\" \n                      checked={filterMetrics.temp} \n                      onChange={() => setFilterMetrics({...filterMetrics, temp: !filterMetrics.temp})}\n                    />\n                    Nhi·ªát ƒë·ªô\n                  </label>\n                </div>\n              </div>\n\n              <div className=\"filter-buttons\">\n                <button className=\"filter-reset-btn\" onClick={handleResetFilter}>\n                  Reset\n                </button>\n                <button className=\"filter-cancel-btn\" onClick={() => setFilterOpen(false)}>\n                  Cancel\n                </button>\n                <button className=\"filter-ok-btn\" onClick={() => {\n                  setCurrentPage(1);\n                  setActiveFilters({\n                    timeFrom: filterTimeFrom,\n                    timeTo: filterTimeTo,\n                    metrics: { ...filterMetrics }\n                  });\n                  setFilterOpen(false);\n                }}>\n                  OK\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"card\">\n          <div className=\"table-container\">\n            <table>\n              <thead>\n                <tr>\n                  <th>Th·ªùi gian</th>\n                  <th>Nh·ªãp tim (BPM)</th>\n                  <th>SpO‚ÇÇ (%)</th>\n                  <th>Nhi·ªát ƒë·ªô (¬∞C)</th>\n                  <th>Tr·∫°ng th√°i</th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedData.map((item, index) => (\n                  <tr key={index} className={item.status}>\n                    <td>{item.timestamp}</td>\n                    <td className={item.alerts?.bpm ? 'alert-value' : ''}>{item.bpm}</td>\n                    <td className={item.alerts?.spo2 ? 'alert-value' : ''}>{item.spo2}</td>\n                    <td className={item.alerts?.temp ? 'alert-value' : ''}>{item.temp}</td>\n                    <td>{item.status === 'normal' ? 'B√¨nh th∆∞·ªùng' : 'B√°o ƒë·ªông'}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"pagination\">\n            <button onClick={() => handlePageChange(currentPage - 1)} disabled={currentPage === 1}>\n              ‚¨Ö Tr∆∞·ªõc\n            </button>\n            <span>Trang {currentPage} / {totalPages || 1}</span>\n            <button onClick={() => handlePageChange(currentPage + 1)} disabled={currentPage === totalPages}>\n              Sau ‚û°\n            </button>\n\n            <select value={itemsPerPage} onChange={handleItemsPerPageChange}>\n              <option value={5}>5 d√≤ng / trang</option>\n              <option value={10}>10 d√≤ng / trang</option>\n              <option value={20}>20 d√≤ng / trang</option>\n              <option value={50}>50 d√≤ng / trang</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","size_bytes":11730},"src/component/HealthHistory.css":{"content":".history-container {\n  padding: 40px;\n  max-width: 1400px;\n  margin: 0 auto;\n}\n\n.history-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 32px;\n}\n\n.history-header h1 {\n  font-size: 32px;\n  font-weight: bold;\n  color: #ffffff;\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.history-header h1::before {\n  content: \"‚ö†Ô∏è\";\n  font-size: 36px;\n}\n\n.filter-toggle-btn {\n  background: #2a2a2a;\n  color: #e0e0e0;\n  padding: 10px 20px;\n  border-radius: 10px;\n  border: 1px solid #3a3a3a;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n\n.filter-toggle-btn:hover {\n  background: #333;\n  border-color: #FF6B6B;\n  color: #FF6B6B;\n}\n\n.card {\n  background: #1a1a1a;\n  border-radius: 16px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);\n  padding: 24px;\n  margin-top: 24px;\n  border: 1px solid #2a2a2a;\n}\n\n.card h2 {\n  color: #ffffff;\n  margin-bottom: 16px;\n  font-size: 20px;\n}\n\n.card p {\n  color: #999;\n  font-size: 14px;\n  margin-bottom: 16px;\n}\n\n.table-container {\n  max-height: 500px;\n  overflow-y: auto;\n  border-radius: 12px;\n  border: 1px solid #2a2a2a;\n}\n\n.table-container table {\n  width: 100%;\n  border-collapse: collapse;\n}\n\n.table-container th,\n.table-container td {\n  padding: 14px 16px;\n  text-align: left;\n  border-bottom: 1px solid #2a2a2a;\n}\n\n.table-container thead th {\n  position: sticky;\n  top: 0;\n  background: #2a2a2a;\n  color: #e0e0e0;\n  font-weight: 700;\n  text-transform: uppercase;\n  font-size: 12px;\n  letter-spacing: 0.5px;\n  z-index: 1;\n}\n\n.table-container tbody tr {\n  background: #1a1a1a;\n  color: #e0e0e0;\n  transition: all 0.2s ease;\n}\n\n.table-container tbody tr:hover {\n  background: #222;\n}\n\ntr.alert {\n  background-color: rgba(255, 107, 107, 0.1) !important;\n  border-left: 3px solid #FF6B6B;\n}\n\ntr.normal {\n  background-color: rgba(76, 175, 80, 0.05) !important;\n}\n\n.alert-value {\n  color: #FF6B6B;\n  font-weight: bold;\n}\n\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 16px;\n}\n\n.pagination-info {\n  color: #999;\n  font-size: 14px;\n}\n\n.pagination-controls {\n  display: flex;\n  gap: 12px;\n}\n\n.pagination button {\n  padding: 8px 16px;\n  border: 1px solid #3a3a3a;\n  border-radius: 8px;\n  background-color: #2a2a2a;\n  color: #e0e0e0;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 600;\n  transition: all 0.3s ease;\n}\n\n.pagination button:hover:not(:disabled) {\n  background-color: #333;\n  border-color: #FF6B6B;\n  color: #FF6B6B;\n}\n\n.pagination button:disabled {\n  background-color: #1a1a1a;\n  color: #555;\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n.pagination select {\n  padding: 8px 12px;\n  border: 1px solid #3a3a3a;\n  border-radius: 8px;\n  background-color: #2a2a2a;\n  color: #e0e0e0;\n  cursor: pointer;\n  font-size: 14px;\n}\n\n/* Filter Modal */\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n}\n\n.filter-panel {\n  position: relative;\n  background: #1a1a1a;\n  padding: 32px;\n  border-radius: 16px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n  width: 90%;\n  max-width: 500px;\n  border: 1px solid #2a2a2a;\n}\n\n.filter-panel h2 {\n  margin: 0 0 24px 0;\n  color: #ffffff;\n  font-size: 24px;\n  font-weight: bold;\n}\n\n.filter-row {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 24px;\n}\n\n.filter-row label {\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: #e0e0e0;\n  font-size: 14px;\n}\n\n.filter-row input[type=\"date\"],\n.filter-row input[type=\"datetime-local\"] {\n  padding: 12px 16px;\n  border: 1px solid #3a3a3a;\n  border-radius: 10px;\n  font-size: 14px;\n  width: 100%;\n  background: #2a2a2a;\n  color: #ffffff;\n  transition: all 0.3s ease;\n}\n\n.filter-row input:focus {\n  border-color: #FF6B6B;\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);\n}\n\n.filter-metrics {\n  display: flex;\n  gap: 20px;\n  margin-top: 12px;\n  flex-wrap: wrap;\n}\n\n.filter-metrics label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-weight: normal;\n  color: #e0e0e0;\n  cursor: pointer;\n}\n\n.filter-metrics input[type=\"checkbox\"] {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  accent-color: #FF6B6B;\n}\n\n.filter-buttons {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  margin-top: 32px;\n}\n\n.filter-ok-btn,\n.filter-cancel-btn,\n.filter-reset-btn {\n  padding: 10px 24px;\n  border: none;\n  border-radius: 10px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.filter-ok-btn {\n  background: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);\n  color: white;\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);\n}\n\n.filter-ok-btn:hover {\n  box-shadow: 0 6px 16px rgba(76, 175, 80, 0.4);\n  transform: translateY(-2px);\n}\n\n.filter-cancel-btn {\n  background: #3a3a3a;\n  color: #e0e0e0;\n}\n\n.filter-cancel-btn:hover {\n  background: #444;\n}\n\n.filter-reset-btn {\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF5252 100%);\n  color: white;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);\n}\n\n.filter-reset-btn:hover {\n  box-shadow: 0 6px 16px rgba(255, 107, 107, 0.4);\n  transform: translateY(-2px);\n}\n\n.loading-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100vh;\n  background: #0a0a0a;\n}\n\n.loading-spinner {\n  width: 60px;\n  height: 60px;\n  border: 4px solid #2a2a2a;\n  border-top: 4px solid #FF6B6B;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.empty-state {\n  text-align: center;\n  padding: 60px 20px;\n  color: #999;\n}\n\n.empty-state-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n  opacity: 0.5;\n}\n\n.empty-state p {\n  font-size: 16px;\n  margin-bottom: 8px;\n}\n","size_bytes":5869},"src/index.js":{"content":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n","size_bytes":254},"src/component/SignIn.css":{"content":".auth-page {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);\n  padding: 20px;\n}\n\n.auth-container {\n  max-width: 450px;\n  width: 100%;\n  background: #ffffff;\n  padding: 40px;\n  border-radius: 20px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n  text-align: center;\n  animation: fadeInUp 0.5s ease-in-out;\n  position: relative;\n}\n\n.auth-container::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  background: linear-gradient(90deg, #6366F1, #8B5CF6, #EC4899);\n  border-radius: 20px 20px 0 0;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(30px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.auth-container .heart-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n  filter: drop-shadow(0 4px 12px rgba(99, 102, 241, 0.3));\n}\n\n.auth-container h2 {\n  margin-bottom: 32px;\n  font-size: 32px;\n  font-weight: bold;\n  background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.auth-container form {\n  width: 100%;\n}\n\n.auth-container input {\n  width: 100%;\n  padding: 14px 16px;\n  margin: 12px 0;\n  border: 2px solid #e0e0e0;\n  border-radius: 12px;\n  font-size: 15px;\n  transition: all 0.3s ease;\n  background: #f8f9fa;\n  color: #333;\n}\n\n.auth-container input:focus {\n  outline: none;\n  border-color: #6366F1;\n  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);\n  background: white;\n}\n\n.auth-container input::placeholder {\n  color: #666;\n}\n\n.auth-links {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-top: 20px;\n}\n\n.auth-container button {\n  width: 100%;\n  padding: 14px;\n  margin-top: 16px;\n  border-radius: 12px;\n  font-weight: 600;\n  font-size: 16px;\n  transition: all 0.3s ease;\n  border: none;\n  cursor: pointer;\n}\n\n.auth-btn-primary {\n  background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);\n  color: #fff;\n  box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);\n}\n\n.auth-btn-primary:hover {\n  background: linear-gradient(135deg, #5558E3 0%, #7C3AED 100%);\n  box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);\n  transform: translateY(-2px);\n}\n\n.auth-btn-secondary {\n  background: #f8f9fa;\n  color: #333;\n  border: 2px solid #e0e0e0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n}\n\n.auth-btn-secondary:hover {\n  background: #ffffff;\n  border-color: #6366F1;\n  color: #6366F1;\n  transform: translateY(-2px);\n}\n\n.auth-link {\n  margin-top: 20px;\n  display: block;\n  font-size: 14px;\n  color: #6366F1;\n  cursor: pointer;\n  font-weight: 500;\n}\n\n.auth-link:hover {\n  text-decoration: underline;\n  color: #5558E3;\n}\n\n.divider {\n  display: flex;\n  align-items: center;\n  text-align: center;\n  margin: 24px 0;\n  color: #999;\n  font-size: 14px;\n}\n\n.divider::before,\n.divider::after {\n  content: '';\n  flex: 1;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.divider span {\n  padding: 0 16px;\n}\n","size_bytes":3028},"src/index.css":{"content":"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color: #0a0a0a;\n  color: #ffffff;\n  min-height: 100vh;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\n    monospace;\n}\n\nbutton {\n  border: none;\n  cursor: pointer;\n  font-family: inherit;\n}\n\na {\n  text-decoration: none;\n  color: inherit;\n}\n","size_bytes":615},"src/component/AdminDashboard.js":{"content":"import React, { useState, useEffect } from 'react';\nimport { auth, db } from '../firebase';\nimport { collection, query, onSnapshot } from 'firebase/firestore';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\nimport './AdminDashboard.css';\nimport mqtt from 'mqtt';\n\nexport default function AdminDashboard() {\n    const [users, setUsers] = useState([]);\n    const [selectedUser, setSelectedUser] = useState(null);\n    const [mqttData, setMqttData] = useState([]);\n    const navigate = useNavigate();\n\n    // ‚úÖ Ki·ªÉm tra admin\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\n            if (!user || user.email !== 'admin@admin.com') {\n                navigate('/');\n            }\n        });\n        return () => unsubscribe();\n    }, [navigate]);\n\n    // ‚úÖ K·∫øt n·ªëi MQTT v√† l·∫•y d·ªØ li·ªáu t·ª´ topic thongtinbenhnhan\n    useEffect(() => {\n        const client = mqtt.connect('wss://broker.emqx.io:8084/mqtt');\n\n        client.on('connect', () => {\n            console.log('Connected to MQTT broker');\n            client.subscribe('thongtinbenhnhan', (err) => {\n                if (!err) {\n                    console.log('Subscribed to thongtinbenhnhan');\n                }\n            });\n        });\n\n        client.on('message', (topic, message) => {\n            try {\n                const data = JSON.parse(message.toString());\n                setMqttData((prev) => [\n                    {\n                        BPM: data.BPM,\n                        SpO2: data.SpO2,\n                        TempC: data.TempC,\n                        timestamp: new Date().toISOString(),\n                    },\n                    ...prev.slice(0, 49), // gi·ªØ 50 b·∫£n ghi g·∫ßn nh·∫•t\n                ]);\n            } catch (error) {\n                console.error('Error parsing MQTT message:', error);\n            }\n        });\n\n        return () => {\n            client.end();\n        };\n    }, []);\n\n    // ‚úÖ L·∫•y danh s√°ch ng∆∞·ªùi d√πng t·ª´ Firestore\n    useEffect(() => {\n        const q = query(collection(db, \"users\"));\n        const unsubscribe = onSnapshot(q, (querySnapshot) => {\n            const usersList = [];\n            querySnapshot.forEach((doc) => {\n                if (doc.data().email !== 'admin@admin.com') {\n                    usersList.push({ id: doc.id, ...doc.data() });\n                }\n            });\n            setUsers(usersList);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // ‚úÖ H√†m render gi√° tr·ªã v·ªõi m√†u c·∫£nh b√°o\n    const renderValue = (value, type) => {\n        if (typeof value !== \"number\" || value === -999) return \"N/A\";\n\n        let isWarning = false;\n\n        if (type === \"BPM\" && (value < 50 || value > 120)) isWarning = true;\n        if (type === \"SpO2\" && value < 90) isWarning = true;\n        if (type === \"TempC\" && (value < 35 || value > 38)) isWarning = true;\n\n        return (\n            <span style={{ color: isWarning ? \"red\" : \"black\", fontWeight: isWarning ? \"bold\" : \"normal\" }}>\n                {type === \"TempC\" ? value.toFixed(2) : value}\n            </span>\n        );\n    };\n\n    return (\n        <div className=\"admin-dashboard\">\n            <h1>Admin Dashboard</h1>\n            \n            <div className=\"dashboard-container\">\n                {/* C·ªôt danh s√°ch user */}\n                <div className=\"users-list\">\n                    <h2>Danh s√°ch ng∆∞·ªùi d√πng</h2>\n                    {users.map(user => (\n                        <button\n                            key={user.id}\n                            className={`user-button ${selectedUser === user.id ? 'selected' : ''}`}\n                            onClick={() => setSelectedUser(user.id)}\n                        >\n                            {user.email}\n                        </button>\n                    ))}\n                </div>\n\n                {/* C·ªôt d·ªØ li·ªáu MQTT */}\n                <div className=\"data-display\">\n                    <h2>D·ªØ li·ªáu real-time</h2>\n                    <div className=\"data-table\">\n                        <table>\n                            <thead>\n                                <tr>\n                                    <th>BPM</th>\n                                    <th>SpO‚ÇÇ (%)</th>\n                                    <th>Nhi·ªát ƒë·ªô (¬∞C)</th>\n                                    <th>Date & Time</th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {mqttData.length > 0 ? (\n                                    mqttData.map((data, index) => (\n                                        <tr key={index}>\n                                            <td>{renderValue(data.BPM, \"BPM\")}</td>\n                                            <td>{renderValue(data.SpO2, \"SpO2\")}</td>\n                                            <td>{renderValue(data.TempC , \"TempC\")}</td>\n                                            <td>\n                                                {data.timestamp\n                                                    ? new Date(data.timestamp).toLocaleString()\n                                                    : \"N/A\"}\n                                            </td>\n                                        </tr>\n                                    ))\n                                ) : (\n                                    <tr>\n                                        <td colSpan=\"4\">Ch∆∞a c√≥ d·ªØ li·ªáu</td>\n                                    </tr>\n                                )}\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","size_bytes":5797},"src/component/Navbar.css":{"content":".navbar {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 40px;\n  background-color: #1a1a1a;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.navbar-logo {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 22px;\n  font-weight: bold;\n  color: #FF6B6B;\n}\n\n.navbar-logo::before {\n  content: \"‚ù§Ô∏è\";\n  font-size: 24px;\n}\n\n.logo-img {\n  height: 40px;\n  width: auto;\n}\n\n.navbar-menu {\n  display: flex;\n  gap: 32px;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.navbar-menu li {\n  list-style: none;\n}\n\n.navbar-menu a {\n  font-size: 16px;\n  color: #e0e0e0;\n  transition: color 0.3s;\n  font-weight: 500;\n}\n\n.navbar-menu a:hover {\n  color: #FF6B6B;\n}\n\n.navbar-btn {\n  padding: 10px 24px;\n  background: linear-gradient(135deg, #FF6B6B 0%, #FF8585 100%);\n  color: white;\n  font-weight: 600;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);\n  transition: all 0.3s ease;\n}\n\n.navbar-btn:hover {\n  background: linear-gradient(135deg, #FF5252 0%, #FF6B6B 100%);\n  box-shadow: 0 6px 16px rgba(255, 107, 107, 0.5);\n  transform: translateY(-2px);\n}\n\n.user-controls {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n\n.user-email {\n  font-size: 14px;\n  color: #999;\n  background-color: #2a2a2a;\n  padding: 8px 16px;\n  border-radius: 20px;\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  border: 1px solid #3a3a3a;\n}\n","size_bytes":1499},"src/utils/heartutils.js":{"content":"// heartutils.js\n// C√°c h√†m ti·ªán √≠ch ph·ª•c v·ª• cho ph√¢n t√≠ch v√† x·ª≠ l√Ω t√≠n hi·ªáu tim m·∫°ch\n\n/**\n * T√≠nh trung b√¨nh trong kho·∫£ng th·ªùi gian g·∫ßn ƒë√¢y (5s)\n * @param {Array} data - danh s√°ch d·ªØ li·ªáu ƒëo (d·∫°ng [{bpm, spo2, temp, timestamp}])\n * @param {Number} window - c·ª≠a s·ªï t√≠nh trung b√¨nh (ms)\n */\nexport function getRecentAverage(data, window = 5000) {\n  const now = Date.now();\n  const recent = data.filter(d => now - d.timestamp <= window);\n  if (recent.length === 0) return null;\n\n  const avg = {\n    bpm: recent.reduce((sum, d) => sum + d.bpm, 0) / recent.length,\n    spo2: recent.reduce((sum, d) => sum + d.spo2, 0) / recent.length,\n    temp: recent.reduce((sum, d) => sum + d.temp, 0) / recent.length,\n  };\n  return avg;\n}\n\n/**\n * Ki·ªÉm tra bi·∫øn ƒë·ªông l·ªõn so v·ªõi trung b√¨nh g·∫ßn ƒë√¢y\n * @param {Object} current - d·ªØ li·ªáu hi·ªán t·∫°i {bpm, spo2, temp}\n * @param {Object} avg - trung b√¨nh 5s g·∫ßn nh·∫•t\n * @param {Number} threshold - ph·∫ßn trƒÉm thay ƒë·ªïi cho ph√©p\n */\nexport function detectSignificantChange(current, avg, threshold = 0.15) {\n  if (!avg) return false;\n  const bpmChange = Math.abs(current.bpm - avg.bpm) / avg.bpm;\n  const spo2Change = Math.abs(current.spo2 - avg.spo2) / avg.spo2;\n  const tempChange = Math.abs(current.temp - avg.temp) / avg.temp;\n\n  return bpmChange > threshold || spo2Change > threshold || tempChange > threshold;\n}\n\n/**\n * H√†m t·∫°o √¢m b√°o ho·∫∑c c·∫£nh b√°o\n * @param {String} type - lo·∫°i c·∫£nh b√°o: \"info\" | \"warning\" | \"error\"\n * @param {String} message - n·ªôi dung\n */\nexport function triggerAlert(type, message) {\n  switch (type) {\n    case \"info\":\n      console.info(\"‚ÑπÔ∏è \" + message);\n      break;\n    case \"warning\":\n      console.warn(\"‚ö†Ô∏è \" + message);\n      break;\n    case \"error\":\n      console.error(\"üö® \" + message);\n      break;\n    default:\n      console.log(message);\n  }\n}\n\n/**\n * T·∫°o popup c·∫£nh b√°o x√°c nh·∫≠n ƒë·ªïi tr·∫°ng th√°i\n */\nexport function showActivityChangePopup(suggestedActivity, onConfirm, onReject, onTimeout) {\n  const popup = document.createElement(\"div\");\n  popup.className = \"activity-popup\";\n  popup.innerHTML = `\n    <div class=\"popup-content\">\n      <p>B·∫°n ƒëang ${suggestedActivity} ph·∫£i kh√¥ng?</p>\n      <button id=\"confirmYes\">C√≥</button>\n      <button id=\"confirmNo\">Kh√¥ng</button>\n    </div>\n  `;\n  document.body.appendChild(popup);\n\n  const yesBtn = popup.querySelector(\"#confirmYes\");\n  const noBtn = popup.querySelector(\"#confirmNo\");\n\n  const timer = setTimeout(() => {\n    popup.remove();\n    if (onTimeout) onTimeout();\n  }, 10000);\n\n  yesBtn.addEventListener(\"click\", () => {\n    clearTimeout(timer);\n    popup.remove();\n    if (onConfirm) onConfirm();\n  });\n\n  noBtn.addEventListener(\"click\", () => {\n    clearTimeout(timer);\n    popup.remove();\n    if (onReject) onReject();\n  });\n}\n\n/**\n * C·∫≠p nh·∫≠t giao di·ªán ng∆∞·ª°ng ƒë·ªông\n */\nexport function updateThresholdDisplay(activity, thresholds) {\n  const el = document.getElementById(\"thresholdDisplay\");\n  if (!el) return;\n  const t = thresholds[activity];\n  el.innerText = `Ng∆∞·ª°ng hi·ªán t·∫°i: ${activity.toUpperCase()} \n  (BPM: ${t.bpmMin}-${t.bpmMax}, SpO‚ÇÇ ‚â• ${t.spo2Min}, Nhi·ªát ƒë·ªô ‚â§ ${t.tempMax})`;\n}\n","size_bytes":3264},"replit.md":{"content":"# Overview\n\nThis is a React-based health monitoring application that tracks vital signs (heart rate, SpO2, temperature) in real-time using MQTT protocol and Firebase for authentication and data storage. The application provides user authentication, real-time health data visualization, alert systems for abnormal readings, and device configuration capabilities.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n\n**Framework**: React 19 with Create React App\n- Single Page Application (SPA) using React Router DOM for navigation\n- Component-based architecture with reusable UI components\n- Tailwind CSS for styling with custom CSS modules for specific components\n- Framer Motion for animations and transitions\n\n**Key Design Decisions**:\n- **Routing**: Client-side routing enables seamless navigation between dashboard, health history, device settings, and authentication pages\n- **State Management**: React hooks (useState, useEffect, useRef) for local state management; Context API (MQTTContext) for global MQTT connection state\n- **Real-time Updates**: MQTT client runs in browser using WebSocket protocol to receive sensor data continuously\n- **Responsive Design**: Mobile-first approach with Tailwind CSS utilities\n\n## Authentication & Authorization\n\n**Provider**: Firebase Authentication\n- Email/password authentication\n- Google OAuth integration via GoogleAuthProvider\n- Password reset functionality via email\n- Role-based access control (admin vs regular users)\n\n**Key Design Decisions**:\n- **Admin Detection**: Hardcoded admin email check (`admin@admin.com`) for administrative access\n- **Session Management**: Firebase handles session persistence automatically\n- **Protected Routes**: onAuthStateChanged listener redirects unauthorized users\n- **User Profiles**: Firebase Firestore stores additional user metadata (creation date, profile info)\n\n## Real-time Data Communication\n\n**Protocol**: MQTT over WebSocket\n- **Broker**: Public EMQX broker (`broker.emqx.io:8084/mqtt`)\n- **Topics**: User-specific topics (`thongtinbenhnhan/{userId}`) and general topic (`thongtinbenhnhan`)\n- **Data Flow**: IoT devices publish health metrics; web app subscribes and processes data in real-time\n\n**Key Design Decisions**:\n- **WebSocket Transport**: Enables MQTT in browser environment without additional infrastructure\n- **Topic Structure**: User ID-based topics allow personalized data streams\n- **Data Format**: JSON payloads with BPM, SpO2, TempC, IR, and timestamp fields\n- **Connection Management**: useRef hooks maintain persistent MQTT client connections across component lifecycle\n\n## Data Visualization\n\n**Library**: Recharts for charting\n- Line charts for temporal health data visualization\n- Responsive containers for adaptive sizing\n- Custom tooltips and labels for better UX\n\n**Key Design Decisions**:\n- **Chart Types**: Dynamic switching between BPM, SpO2, and Temperature views\n- **Data Buffering**: Maintains rolling window of recent data points (typically 50 records)\n- **Performance**: Client-side rendering with optimized re-renders using React memoization\n\n## Health Analysis & Alerts\n\n**Rules Engine**: Custom JavaScript-based analysis (`heartrules.js`)\n- Activity-based thresholds (Rest, Light Activity, Intense Exercise, Sleep)\n- Multi-metric evaluation (BPM, SpO2, Temperature)\n- Suggested activity recommendations based on heart rate\n\n**Alert System**:\n- **Warning Levels**: Normal, Warning, Error states based on threshold violations\n- **Countdown Timers**: 10-second countdown before triggering emergency protocols\n- **Toast Notifications**: React-Toastify for non-intrusive alerts\n- **Activity Suggestions**: Automatic detection when user's activity doesn't match physiological state\n\n**Key Design Decisions**:\n- **Thresholds**: Predefined ranges for different activity levels (e.g., Rest: 60-100 BPM)\n- **Grace Period**: Countdown mechanism prevents false alarms from temporary spikes\n- **User Confirmation**: Allows users to override automatic activity suggestions\n\n## File Storage\n\n**Provider**: Firebase Storage\n- User avatar uploads\n- Profile image management\n\n**Key Design Decisions**:\n- **Upload Flow**: Client-side file selection ‚Üí Firebase Storage upload ‚Üí URL retrieval ‚Üí Firestore metadata update\n- **Default Avatars**: Fallback to default avatar when user hasn't uploaded custom image\n\n# External Dependencies\n\n## Firebase Services\n\n**Firebase Authentication**\n- Purpose: User identity management and session handling\n- Integration: Direct SDK integration with email/password and Google OAuth providers\n- Configuration: API keys and project settings in `firebaseConfig.js`\n\n**Firebase Firestore**\n- Purpose: User metadata storage (profiles, settings, preferences)\n- Schema: Document-based with collections for `users`\n- Operations: Create, read, update user documents\n\n**Firebase Storage**\n- Purpose: User-uploaded file storage (profile pictures)\n- Integration: Direct SDK with reference-based file access\n\n## MQTT Broker\n\n**EMQX Public Broker**\n- Endpoint: `wss://broker.emqx.io:8084/mqtt`\n- Purpose: Real-time bidirectional communication for IoT sensor data\n- Topic Structure: `thongtinbenhnhan/{userId}` for user-specific streams\n- Authentication: Username/password credentials (configured in device/client)\n\n## Third-Party Libraries\n\n**React Router DOM** (v7.8.2)\n- Purpose: Client-side routing and navigation\n\n**Recharts** (v3.2.0)\n- Purpose: Data visualization and charting\n\n**Framer Motion** (v12.23.12)\n- Purpose: Animations and transitions\n\n**React Toastify** (v11.0.5)\n- Purpose: Notification system for user feedback\n\n**MQTT.js** (v5.14.1)\n- Purpose: MQTT protocol implementation for browser\n\n**Twilio** (v5.10.0)\n- Purpose: SMS/communication capabilities (potentially for emergency alerts)\n- Note: Integration code not visible in provided files\n\n## Development Tools\n\n**Tailwind CSS** (v4.1.13)\n- Purpose: Utility-first CSS framework\n\n**Create React App** (v5.0.1)\n- Purpose: Build tooling and development server\n\n**Testing Libraries**\n- @testing-library/react, @testing-library/jest-dom, @testing-library/user-event\n- Purpose: Component and integration testing","size_bytes":6193}},"version":2}